// ==UserScript==
// @name        ganbarometer-beta
// @description The GanbarOmeter (Wanikani dashboard widgets)
// @namespace   https://github.com/wrex/
// @version     4.0.6
// @homepage    https://github.com/wrex/ganbarometer-svelte#readme
// @author      Rex Walters -- rw [at] pobox.com
// @license     MIT-0
// @resource    css https://github.com/wrex/ganbarometer-svelte/raw/v4.0/published/v4beta/bundle.css
// @include     /^https://(www|preview).wanikani.com/(dashboard)?$/
// @connect     github.com
// @run-at      document-idle
// @downloadURL https://github.com/wrex/ganbarometer-svelte/raw/v4.0/published/v4beta/bundle.user.js
// @updateURL   https://github.com/wrex/ganbarometer-svelte/raw/v4.0/published/v4beta/bundle.user.js
// @grant       GM_addStyle
// @grant       GM_getResourceText
// @grant       GM_xmlhttpRequest
// ==/UserScript==
GM_addStyle(GM_getResourceText("css"));var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function r(){return Object.create(null)}function l(e){e.forEach(n)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function i(e,t,n){e.$$.on_destroy.push(o(t,n))}function c(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function u(e,t,n){return e.set(n),t}const d="undefined"!=typeof window;let p=d?()=>window.performance.now():()=>Date.now(),f=d?e=>requestAnimationFrame(e):e;const m=new Set;function v(e){m.forEach((t=>{t.c(e)||(m.delete(t),t.f())})),0!==m.size&&f(v)}function g(e){let t;return 0===m.size&&f(v),{promise:new Promise((n=>{m.add(t={c:e,f:n})})),abort(){m.delete(t)}}}function h(e,t){e.appendChild(t)}function $(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function b(e){const t=C("style");return function(e,t){h(e.head||e,t)}($(e),t),t}function y(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode.removeChild(e)}function x(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function C(e){return document.createElement(e)}function k(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function T(e){return document.createTextNode(e)}function _(){return T(" ")}function z(){return T("")}function M(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function q(e){return function(t){return t.preventDefault(),e.call(this,t)}}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function j(e){return""===e?null:+e}function F(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function W(e,t){e.value=null==t?"":t}function R(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function A(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}e.selectedIndex=-1}function Q(e,t,n){e.classList[n?"add":"remove"](t)}function D(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}const O=new Set;let L,E=0;function I(e,t,n,r,l,a,s,o=0){const i=16.666/r;let c="{\n";for(let e=0;e<=1;e+=i){const r=t+(n-t)*a(e);c+=100*e+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${o}`,p=$(e);O.add(p);const f=p.__svelte_stylesheet||(p.__svelte_stylesheet=b(e).sheet),m=p.__svelte_rules||(p.__svelte_rules={});m[d]||(m[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${d} ${r}ms linear ${l}ms 1 both`,E+=1,d}function P(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),l=n.length-r.length;l&&(e.style.animation=r.join(", "),E-=l,E||f((()=>{E||(O.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),O.clear())})))}function V(e){L=e}function Z(){const e=function(){if(!L)throw new Error("Function called outside component initialization");return L}();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const l=D(t,n);r.slice().forEach((t=>{t.call(e,l)}))}}}function H(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const B=[],N=[],G=[],K=[],J=Promise.resolve();let U=!1;function Y(e){G.push(e)}function X(e){K.push(e)}let ee=!1;const te=new Set;function ne(){if(!ee){ee=!0;do{for(let e=0;e<B.length;e+=1){const t=B[e];V(t),re(t.$$)}for(V(null),B.length=0;N.length;)N.pop()();for(let e=0;e<G.length;e+=1){const t=G[e];te.has(t)||(te.add(t),t())}G.length=0}while(B.length);for(;K.length;)K.pop()();U=!1,ee=!1,te.clear()}}function re(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}let le;function ae(){return le||(le=Promise.resolve(),le.then((()=>{le=null}))),le}function se(e,t,n){e.dispatchEvent(D(`${t?"intro":"outro"}${n}`))}const oe=new Set;let ie;function ce(){ie={r:0,c:[],p:ie}}function ue(){ie.r||l(ie.c),ie=ie.p}function de(e,t){e&&e.i&&(oe.delete(e),e.i(t))}function pe(e,t,n,r){if(e&&e.o){if(oe.has(e))return;oe.add(e),ie.c.push((()=>{oe.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const fe={duration:0};function me(n,r,l){let s,o,i=r(n,l),c=!1,u=0;function d(){s&&P(n,s)}function f(){const{delay:r=0,duration:l=300,easing:a=t,tick:f=e,css:m}=i||fe;m&&(s=I(n,0,1,l,r,a,m,u++)),f(0,1);const v=p()+r,h=v+l;o&&o.abort(),c=!0,Y((()=>se(n,!0,"start"))),o=g((e=>{if(c){if(e>=h)return f(1,0),se(n,!0,"end"),d(),c=!1;if(e>=v){const t=a((e-v)/l);f(t,1-t)}}return c}))}let m=!1;return{start(){m||(m=!0,P(n),a(i)?(i=i(),ae().then(f)):f())},invalidate(){m=!1},end(){c&&(d(),c=!1)}}}function ve(n,r,s,o){let i=r(n,s),c=o?0:1,u=null,d=null,f=null;function m(){f&&P(n,f)}function v(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function h(r){const{delay:a=0,duration:s=300,easing:o=t,tick:h=e,css:$}=i||fe,b={start:p()+a,b:r};r||(b.group=ie,ie.r+=1),u||d?d=b:($&&(m(),f=I(n,c,r,s,a,o,$)),r&&h(0,1),u=v(b,s),Y((()=>se(n,r,"start"))),g((e=>{if(d&&e>d.start&&(u=v(d,s),d=null,se(n,u.b,"start"),$&&(m(),f=I(n,c,u.b,u.duration,0,o,i.css))),u)if(e>=u.end)h(c=u.b,1-c),se(n,u.b,"end"),d||(u.b?m():--u.group.r||l(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*o(t/u.duration),h(c,1-c)}return!(!u&&!d)})))}return{run(e){a(i)?ae().then((()=>{i=i(),h(e)})):h(e)},end(){m(),u=d=null}}}function ge(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function he(e){e&&e.c()}function $e(e,t,r,s){const{fragment:o,on_mount:i,on_destroy:c,after_update:u}=e.$$;o&&o.m(t,r),s||Y((()=>{const t=i.map(n).filter(a);c?c.push(...t):l(t),e.$$.on_mount=[]})),u.forEach(Y)}function be(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ye(e,t){-1===e.$$.dirty[0]&&(B.push(e),U||(U=!0,J.then(ne)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function we(t,n,a,s,o,i,c,u=[-1]){const d=L;V(t);const p=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:o,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(p.root);let f=!1;if(p.ctx=a?a(t,n.props||{},((e,n,...r)=>{const l=r.length?r[0]:n;return p.ctx&&o(p.ctx[e],p.ctx[e]=l)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](l),f&&ye(t,e)),n})):[],p.update(),f=!0,l(p.before_update),p.fragment=!!s&&s(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(w)}else p.fragment&&p.fragment.c();n.intro&&de(t.$$.fragment),$e(t,n.target,n.anchor,n.customElement),ne()}V(d)}class xe{$destroy(){be(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ce=[];function ke(t,n=e){let r;const l=new Set;function a(e){if(s(t,e)&&(t=e,r)){const e=!Ce.length;for(const e of l)e[1](),Ce.push(e,t);if(e){for(let e=0;e<Ce.length;e+=2)Ce[e][0](Ce[e+1]);Ce.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(s,o=e){const i=[s,o];return l.add(i),1===l.size&&(r=n(a)||e),s(t),()=>{l.delete(i),0===l.size&&(r(),r=null)}}}}function Te(e){return"[object Date]"===Object.prototype.toString.call(e)}function _e(e,t,n,r){if("number"==typeof n||Te(n)){const l=r-n,a=(n-t)/(e.dt||1/60),s=(a+(e.opts.stiffness*l-e.opts.damping*a)*e.inv_mass)*e.dt;return Math.abs(s)<e.opts.precision&&Math.abs(l)<e.opts.precision?r:(e.settled=!1,Te(n)?new Date(n.getTime()+s):n+s)}if(Array.isArray(n))return n.map(((l,a)=>_e(e,t[a],n[a],r[a])));if("object"==typeof n){const l={};for(const a in n)l[a]=_e(e,t[a],n[a],r[a]);return l}throw new Error(`Cannot spring ${typeof n} values`)}function ze(e,t={}){const n=ke(e),{stiffness:r=.15,damping:l=.8,precision:a=.01}=t;let s,o,i,c=e,u=e,d=1,f=0,m=!1;function v(t,r={}){u=t;const l=i={};if(null==e||r.hard||h.stiffness>=1&&h.damping>=1)return m=!0,s=p(),c=t,n.set(e=u),Promise.resolve();if(r.soft){const e=!0===r.soft?.5:+r.soft;f=1/(60*e),d=0}return o||(s=p(),m=!1,o=g((t=>{if(m)return m=!1,o=null,!1;d=Math.min(d+f,1);const r={inv_mass:d,opts:h,settled:!0,dt:60*(t-s)/1e3},l=_e(r,c,e,u);return s=t,c=e,n.set(e=l),r.settled&&(o=null),!r.settled}))),new Promise((e=>{o.promise.then((()=>{l===i&&e()}))}))}const h={set:v,update:(t,n)=>v(t(u,e),n),subscribe:n.subscribe,stiffness:r,damping:l,precision:a};return h}function Me(e,t,n){const r=e.slice();return r[27]=t[n],r[29]=n,r}function qe(e){let t,n,r,s,o=("label"===e[6]||"label"===e[7])&&Se(e);return{c(){t=C("span"),o&&o.c(),S(t,"class","pip first"),S(t,"style",n=e[14]+": 0%;"),Q(t,"selected",e[17](e[0])),Q(t,"in-range",e[16](e[0]))},m(n,l){y(n,t,l),o&&o.m(t,null),r||(s=[M(t,"click",(function(){a(e[20](e[0]))&&e[20](e[0]).apply(this,arguments)})),M(t,"touchend",q((function(){a(e[20](e[0]))&&e[20](e[0]).apply(this,arguments)})))],r=!0)},p(r,l){"label"===(e=r)[6]||"label"===e[7]?o?o.p(e,l):(o=Se(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null),16384&l&&n!==(n=e[14]+": 0%;")&&S(t,"style",n),131073&l&&Q(t,"selected",e[17](e[0])),65537&l&&Q(t,"in-range",e[16](e[0]))},d(e){e&&w(t),o&&o.d(),r=!1,l(s)}}}function Se(e){let t,n,r=e[12](e[0],0,0)+"",l=e[10]&&je(e),a=e[11]&&Fe(e);return{c(){t=C("span"),l&&l.c(),n=T(r),a&&a.c(),S(t,"class","pipVal")},m(e,r){y(e,t,r),l&&l.m(t,null),h(t,n),a&&a.m(t,null)},p(e,s){e[10]?l?l.p(e,s):(l=je(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),4097&s&&r!==(r=e[12](e[0],0,0)+"")&&F(n,r),e[11]?a?a.p(e,s):(a=Fe(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&w(t),l&&l.d(),a&&a.d()}}}function je(e){let t,n;return{c(){t=C("span"),n=T(e[10]),S(t,"class","pipVal-prefix")},m(e,r){y(e,t,r),h(t,n)},p(e,t){1024&t&&F(n,e[10])},d(e){e&&w(t)}}}function Fe(e){let t,n;return{c(){t=C("span"),n=T(e[11]),S(t,"class","pipVal-suffix")},m(e,r){y(e,t,r),h(t,n)},p(e,t){2048&t&&F(n,e[11])},d(e){e&&w(t)}}}function We(e){let t,n=Array(e[19]+1),r=[];for(let t=0;t<n.length;t+=1)r[t]=Oe(Me(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=z()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);y(e,t,n)},p(e,l){if(2088515&l){let a;for(n=Array(e[19]+1),a=0;a<n.length;a+=1){const s=Me(e,n,a);r[a]?r[a].p(s,l):(r[a]=Oe(s),r[a].c(),r[a].m(t.parentNode,t))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(e){x(r,e),e&&w(t)}}}function Re(e){let t,n,r,s,o,i=("label"===e[6]||"label"===e[9])&&Ae(e);return{c(){t=C("span"),i&&i.c(),n=_(),S(t,"class","pip"),S(t,"style",r=e[14]+": "+e[15](e[18](e[29]))+"%;"),Q(t,"selected",e[17](e[18](e[29]))),Q(t,"in-range",e[16](e[18](e[29])))},m(r,l){y(r,t,l),i&&i.m(t,null),h(t,n),s||(o=[M(t,"click",(function(){a(e[20](e[18](e[29])))&&e[20](e[18](e[29])).apply(this,arguments)})),M(t,"touchend",q((function(){a(e[20](e[18](e[29])))&&e[20](e[18](e[29])).apply(this,arguments)})))],s=!0)},p(l,a){"label"===(e=l)[6]||"label"===e[9]?i?i.p(e,a):(i=Ae(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),311296&a&&r!==(r=e[14]+": "+e[15](e[18](e[29]))+"%;")&&S(t,"style",r),393216&a&&Q(t,"selected",e[17](e[18](e[29]))),327680&a&&Q(t,"in-range",e[16](e[18](e[29])))},d(e){e&&w(t),i&&i.d(),s=!1,l(o)}}}function Ae(e){let t,n,r=e[12](e[18](e[29]),e[29],e[15](e[18](e[29])))+"",l=e[10]&&Qe(e),a=e[11]&&De(e);return{c(){t=C("span"),l&&l.c(),n=T(r),a&&a.c(),S(t,"class","pipVal")},m(e,r){y(e,t,r),l&&l.m(t,null),h(t,n),a&&a.m(t,null)},p(e,s){e[10]?l?l.p(e,s):(l=Qe(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),299008&s&&r!==(r=e[12](e[18](e[29]),e[29],e[15](e[18](e[29])))+"")&&F(n,r),e[11]?a?a.p(e,s):(a=De(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&w(t),l&&l.d(),a&&a.d()}}}function Qe(e){let t,n;return{c(){t=C("span"),n=T(e[10]),S(t,"class","pipVal-prefix")},m(e,r){y(e,t,r),h(t,n)},p(e,t){1024&t&&F(n,e[10])},d(e){e&&w(t)}}}function De(e){let t,n;return{c(){t=C("span"),n=T(e[11]),S(t,"class","pipVal-suffix")},m(e,r){y(e,t,r),h(t,n)},p(e,t){2048&t&&F(n,e[11])},d(e){e&&w(t)}}}function Oe(e){let t,n=e[18](e[29])!==e[0]&&e[18](e[29])!==e[1],r=n&&Re(e);return{c(){r&&r.c(),t=z()},m(e,n){r&&r.m(e,n),y(e,t,n)},p(e,l){262147&l&&(n=e[18](e[29])!==e[0]&&e[18](e[29])!==e[1]),n?r?r.p(e,l):(r=Re(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&w(t)}}}function Le(e){let t,n,r,s,o=("label"===e[6]||"label"===e[8])&&Ee(e);return{c(){t=C("span"),o&&o.c(),S(t,"class","pip last"),S(t,"style",n=e[14]+": 100%;"),Q(t,"selected",e[17](e[1])),Q(t,"in-range",e[16](e[1]))},m(n,l){y(n,t,l),o&&o.m(t,null),r||(s=[M(t,"click",(function(){a(e[20](e[1]))&&e[20](e[1]).apply(this,arguments)})),M(t,"touchend",q((function(){a(e[20](e[1]))&&e[20](e[1]).apply(this,arguments)})))],r=!0)},p(r,l){"label"===(e=r)[6]||"label"===e[8]?o?o.p(e,l):(o=Ee(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null),16384&l&&n!==(n=e[14]+": 100%;")&&S(t,"style",n),131074&l&&Q(t,"selected",e[17](e[1])),65538&l&&Q(t,"in-range",e[16](e[1]))},d(e){e&&w(t),o&&o.d(),r=!1,l(s)}}}function Ee(e){let t,n,r=e[12](e[1],e[19],100)+"",l=e[10]&&Ie(e),a=e[11]&&Pe(e);return{c(){t=C("span"),l&&l.c(),n=T(r),a&&a.c(),S(t,"class","pipVal")},m(e,r){y(e,t,r),l&&l.m(t,null),h(t,n),a&&a.m(t,null)},p(e,s){e[10]?l?l.p(e,s):(l=Ie(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),528386&s&&r!==(r=e[12](e[1],e[19],100)+"")&&F(n,r),e[11]?a?a.p(e,s):(a=Pe(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&w(t),l&&l.d(),a&&a.d()}}}function Ie(e){let t,n;return{c(){t=C("span"),n=T(e[10]),S(t,"class","pipVal-prefix")},m(e,r){y(e,t,r),h(t,n)},p(e,t){1024&t&&F(n,e[10])},d(e){e&&w(t)}}}function Pe(e){let t,n;return{c(){t=C("span"),n=T(e[11]),S(t,"class","pipVal-suffix")},m(e,r){y(e,t,r),h(t,n)},p(e,t){2048&t&&F(n,e[11])},d(e){e&&w(t)}}}function Ve(t){let n,r,l,a=(t[6]&&!1!==t[7]||t[7])&&qe(t),s=(t[6]&&!1!==t[9]||t[9])&&We(t),o=(t[6]&&!1!==t[8]||t[8])&&Le(t);return{c(){n=C("div"),a&&a.c(),r=_(),s&&s.c(),l=_(),o&&o.c(),S(n,"class","rangePips"),Q(n,"disabled",t[5]),Q(n,"hoverable",t[4]),Q(n,"vertical",t[2]),Q(n,"reversed",t[3]),Q(n,"focus",t[13])},m(e,t){y(e,n,t),a&&a.m(n,null),h(n,r),s&&s.m(n,null),h(n,l),o&&o.m(n,null)},p(e,[t]){e[6]&&!1!==e[7]||e[7]?a?a.p(e,t):(a=qe(e),a.c(),a.m(n,r)):a&&(a.d(1),a=null),e[6]&&!1!==e[9]||e[9]?s?s.p(e,t):(s=We(e),s.c(),s.m(n,l)):s&&(s.d(1),s=null),e[6]&&!1!==e[8]||e[8]?o?o.p(e,t):(o=Le(e),o.c(),o.m(n,null)):o&&(o.d(1),o=null),32&t&&Q(n,"disabled",e[5]),16&t&&Q(n,"hoverable",e[4]),4&t&&Q(n,"vertical",e[2]),8&t&&Q(n,"reversed",e[3]),8192&t&&Q(n,"focus",e[13])},i:e,o:e,d(e){e&&w(n),a&&a.d(),s&&s.d(),o&&o.d()}}}function Ze(e,t,n){let r,l,a,s,o,{range:i=!1}=t,{min:c=0}=t,{max:u=100}=t,{step:d=1}=t,{values:p=[(u+c)/2]}=t,{vertical:f=!1}=t,{reversed:m=!1}=t,{hoverable:v=!0}=t,{disabled:g=!1}=t,{pipstep:h}=t,{all:$=!0}=t,{first:b}=t,{last:y}=t,{rest:w}=t,{prefix:x=""}=t,{suffix:C=""}=t,{formatter:k=((e,t)=>e)}=t,{focus:T}=t,{orientationStart:_}=t,{percentOf:z}=t,{moveHandle:M}=t;return e.$$set=e=>{"range"in e&&n(21,i=e.range),"min"in e&&n(0,c=e.min),"max"in e&&n(1,u=e.max),"step"in e&&n(22,d=e.step),"values"in e&&n(23,p=e.values),"vertical"in e&&n(2,f=e.vertical),"reversed"in e&&n(3,m=e.reversed),"hoverable"in e&&n(4,v=e.hoverable),"disabled"in e&&n(5,g=e.disabled),"pipstep"in e&&n(24,h=e.pipstep),"all"in e&&n(6,$=e.all),"first"in e&&n(7,b=e.first),"last"in e&&n(8,y=e.last),"rest"in e&&n(9,w=e.rest),"prefix"in e&&n(10,x=e.prefix),"suffix"in e&&n(11,C=e.suffix),"formatter"in e&&n(12,k=e.formatter),"focus"in e&&n(13,T=e.focus),"orientationStart"in e&&n(14,_=e.orientationStart),"percentOf"in e&&n(15,z=e.percentOf),"moveHandle"in e&&n(25,M=e.moveHandle)},e.$$.update=()=>{20971527&e.$$.dirty&&n(26,r=h||((u-c)/d>=(f?50:100)?(u-c)/(f?10:20):1)),71303171&e.$$.dirty&&n(19,l=parseInt((u-c)/(d*r),10)),71303169&e.$$.dirty&&n(18,a=function(e){return c+e*d*r}),8388608&e.$$.dirty&&n(17,s=function(e){return p.some((t=>t===e))}),10485760&e.$$.dirty&&n(16,o=function(e){return"min"===i?p[0]>e:"max"===i?p[0]<e:i?p[0]<e&&p[1]>e:void 0})},[c,u,f,m,v,g,$,b,y,w,x,C,k,T,_,z,o,s,a,l,function(e){M(void 0,e)},i,d,p,h,M,r]}class He extends xe{constructor(e){super(),we(this,e,Ze,Ve,s,{range:21,min:0,max:1,step:22,values:23,vertical:2,reversed:3,hoverable:4,disabled:5,pipstep:24,all:6,first:7,last:8,rest:9,prefix:10,suffix:11,formatter:12,focus:13,orientationStart:14,percentOf:15,moveHandle:25})}}function Be(e,t,n){const r=e.slice();return r[63]=t[n],r[65]=n,r}function Ne(e){let t,n,r=e[20](e[63],e[65],e[22](e[63]))+"",l=e[17]&&Ge(e),a=e[18]&&Ke(e);return{c(){t=C("span"),l&&l.c(),n=T(r),a&&a.c(),S(t,"class","rangeFloat")},m(e,r){y(e,t,r),l&&l.m(t,null),h(t,n),a&&a.m(t,null)},p(e,s){e[17]?l?l.p(e,s):(l=Ge(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),5242881&s[0]&&r!==(r=e[20](e[63],e[65],e[22](e[63]))+"")&&F(n,r),e[18]?a?a.p(e,s):(a=Ke(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&w(t),l&&l.d(),a&&a.d()}}}function Ge(e){let t,n;return{c(){t=C("span"),n=T(e[17]),S(t,"class","rangeFloat-prefix")},m(e,r){y(e,t,r),h(t,n)},p(e,t){131072&t[0]&&F(n,e[17])},d(e){e&&w(t)}}}function Ke(e){let t,n;return{c(){t=C("span"),n=T(e[18]),S(t,"class","rangeFloat-suffix")},m(e,r){y(e,t,r),h(t,n)},p(e,t){262144&t[0]&&F(n,e[18])},d(e){e&&w(t)}}}function Je(e){let t,n,r,a,s,o,i,c,u,d,p,f,m,v=e[6]&&Ne(e);return{c(){t=C("span"),n=C("span"),r=_(),v&&v.c(),S(n,"class","rangeNub"),S(t,"role","slider"),S(t,"class","rangeHandle"),S(t,"data-handle",a=e[65]),S(t,"style",s=e[28]+": "+e[29][e[65]]+"%; z-index: "+(e[26]===e[65]?3:2)+";"),S(t,"aria-valuemin",o=!0===e[1]&&1===e[65]?e[0][0]:e[2]),S(t,"aria-valuemax",i=!0===e[1]&&0===e[65]?e[0][1]:e[3]),S(t,"aria-valuenow",c=e[63]),S(t,"aria-valuetext",u=""+(e[17]+e[20](e[63],e[65],e[22](e[63]))+e[18])),S(t,"aria-orientation",d=e[5]?"vertical":"horizontal"),S(t,"aria-disabled",e[9]),S(t,"disabled",e[9]),S(t,"tabindex",p=e[9]?-1:0),Q(t,"active",e[24]&&e[26]===e[65]),Q(t,"press",e[25]&&e[26]===e[65])},m(l,a){y(l,t,a),h(t,n),h(t,r),v&&v.m(t,null),f||(m=[M(t,"blur",e[33]),M(t,"focus",e[34]),M(t,"keydown",e[35])],f=!0)},p(e,n){e[6]?v?v.p(e,n):(v=Ne(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null),872415232&n[0]&&s!==(s=e[28]+": "+e[29][e[65]]+"%; z-index: "+(e[26]===e[65]?3:2)+";")&&S(t,"style",s),7&n[0]&&o!==(o=!0===e[1]&&1===e[65]?e[0][0]:e[2])&&S(t,"aria-valuemin",o),11&n[0]&&i!==(i=!0===e[1]&&0===e[65]?e[0][1]:e[3])&&S(t,"aria-valuemax",i),1&n[0]&&c!==(c=e[63])&&S(t,"aria-valuenow",c),5636097&n[0]&&u!==(u=""+(e[17]+e[20](e[63],e[65],e[22](e[63]))+e[18]))&&S(t,"aria-valuetext",u),32&n[0]&&d!==(d=e[5]?"vertical":"horizontal")&&S(t,"aria-orientation",d),512&n[0]&&S(t,"aria-disabled",e[9]),512&n[0]&&S(t,"disabled",e[9]),512&n[0]&&p!==(p=e[9]?-1:0)&&S(t,"tabindex",p),83886080&n[0]&&Q(t,"active",e[24]&&e[26]===e[65]),100663296&n[0]&&Q(t,"press",e[25]&&e[26]===e[65])},d(e){e&&w(t),v&&v.d(),f=!1,l(m)}}}function Ue(e){let t,n;return{c(){t=C("span"),S(t,"class","rangeBar"),S(t,"style",n=e[28]+": "+e[31](e[29])+"%; "+e[27]+": "+e[32](e[29])+"%;")},m(e,n){y(e,t,n)},p(e,r){939524096&r[0]&&n!==(n=e[28]+": "+e[31](e[29])+"%; "+e[27]+": "+e[32](e[29])+"%;")&&S(t,"style",n)},d(e){e&&w(t)}}}function Ye(e){let t,n;return t=new He({props:{values:e[0],min:e[2],max:e[3],step:e[4],range:e[1],vertical:e[5],reversed:e[7],orientationStart:e[28],hoverable:e[8],disabled:e[9],all:e[12],first:e[13],last:e[14],rest:e[15],pipstep:e[11],prefix:e[17],suffix:e[18],formatter:e[19],focus:e[24],percentOf:e[22],moveHandle:e[30]}}),{c(){he(t.$$.fragment)},m(e,r){$e(t,e,r),n=!0},p(e,n){const r={};1&n[0]&&(r.values=e[0]),4&n[0]&&(r.min=e[2]),8&n[0]&&(r.max=e[3]),16&n[0]&&(r.step=e[4]),2&n[0]&&(r.range=e[1]),32&n[0]&&(r.vertical=e[5]),128&n[0]&&(r.reversed=e[7]),268435456&n[0]&&(r.orientationStart=e[28]),256&n[0]&&(r.hoverable=e[8]),512&n[0]&&(r.disabled=e[9]),4096&n[0]&&(r.all=e[12]),8192&n[0]&&(r.first=e[13]),16384&n[0]&&(r.last=e[14]),32768&n[0]&&(r.rest=e[15]),2048&n[0]&&(r.pipstep=e[11]),131072&n[0]&&(r.prefix=e[17]),262144&n[0]&&(r.suffix=e[18]),524288&n[0]&&(r.formatter=e[19]),16777216&n[0]&&(r.focus=e[24]),4194304&n[0]&&(r.percentOf=e[22]),t.$set(r)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Xe(e){let t,n,r,a,s,o,i=e[0],c=[];for(let t=0;t<i.length;t+=1)c[t]=Je(Be(e,i,t));let u=e[1]&&Ue(e),d=e[10]&&Ye(e);return{c(){t=C("div");for(let e=0;e<c.length;e+=1)c[e].c();n=_(),u&&u.c(),r=_(),d&&d.c(),S(t,"id",e[16]),S(t,"class","rangeSlider"),Q(t,"range",e[1]),Q(t,"disabled",e[9]),Q(t,"hoverable",e[8]),Q(t,"vertical",e[5]),Q(t,"reversed",e[7]),Q(t,"focus",e[24]),Q(t,"min","min"===e[1]),Q(t,"max","max"===e[1]),Q(t,"pips",e[10]),Q(t,"pip-labels","label"===e[12]||"label"===e[13]||"label"===e[14]||"label"===e[15])},m(l,i){y(l,t,i);for(let e=0;e<c.length;e+=1)c[e].m(t,null);h(t,n),u&&u.m(t,null),h(t,r),d&&d.m(t,null),e[49](t),a=!0,s||(o=[M(window,"mousedown",e[38]),M(window,"touchstart",e[38]),M(window,"mousemove",e[39]),M(window,"touchmove",e[39]),M(window,"mouseup",e[40]),M(window,"touchend",e[41]),M(window,"keydown",e[42]),M(t,"mousedown",e[36]),M(t,"mouseup",e[37]),M(t,"touchstart",q(e[36])),M(t,"touchend",q(e[37]))],s=!0)},p(e,l){if(928383599&l[0]|28&l[1]){let r;for(i=e[0],r=0;r<i.length;r+=1){const a=Be(e,i,r);c[r]?c[r].p(a,l):(c[r]=Je(a),c[r].c(),c[r].m(t,n))}for(;r<c.length;r+=1)c[r].d(1);c.length=i.length}e[1]?u?u.p(e,l):(u=Ue(e),u.c(),u.m(t,r)):u&&(u.d(1),u=null),e[10]?d?(d.p(e,l),1024&l[0]&&de(d,1)):(d=Ye(e),d.c(),de(d,1),d.m(t,null)):d&&(ce(),pe(d,1,1,(()=>{d=null})),ue()),(!a||65536&l[0])&&S(t,"id",e[16]),2&l[0]&&Q(t,"range",e[1]),512&l[0]&&Q(t,"disabled",e[9]),256&l[0]&&Q(t,"hoverable",e[8]),32&l[0]&&Q(t,"vertical",e[5]),128&l[0]&&Q(t,"reversed",e[7]),16777216&l[0]&&Q(t,"focus",e[24]),2&l[0]&&Q(t,"min","min"===e[1]),2&l[0]&&Q(t,"max","max"===e[1]),1024&l[0]&&Q(t,"pips",e[10]),61440&l[0]&&Q(t,"pip-labels","label"===e[12]||"label"===e[13]||"label"===e[14]||"label"===e[15])},i(e){a||(de(d),a=!0)},o(e){pe(d),a=!1},d(n){n&&w(t),x(c,n),u&&u.d(),d&&d.d(),e[49](null),s=!1,l(o)}}}function et(e){if(!e)return-1;for(var t=0;e=e.previousElementSibling;)t++;return t}function tt(e){return e.type.includes("touch")?e.touches[0]:e}function nt(t,n,r){let l,a,s,i,c,u,d=e;t.$$.on_destroy.push((()=>d()));let{range:p=!1}=n,{pushy:f=!1}=n,{min:m=0}=n,{max:v=100}=n,{step:g=1}=n,{values:h=[(v+m)/2]}=n,{vertical:$=!1}=n,{float:b=!1}=n,{reversed:y=!1}=n,{hoverable:w=!0}=n,{disabled:x=!1}=n,{pips:C=!1}=n,{pipstep:k}=n,{all:T}=n,{first:_}=n,{last:z}=n,{rest:M}=n,{id:q}=n,{prefix:S=""}=n,{suffix:j=""}=n,{formatter:F=((e,t,n)=>e)}=n,{handleFormatter:W=F}=n,{precision:R=2}=n,{springValues:A={stiffness:.15,damping:.4}}=n;const Q=Z();let D,O,L,E,I=0,P=!1,V=!1,H=!1,B=!1,G=h.length-1;function K(){return D.getBoundingClientRect()}function J(e){const t=K();let n=0,r=0,l=0;$?(n=e.clientY-t.top,r=n/t.height*100,r=y?r:100-r):(n=e.clientX-t.left,r=n/t.width*100,r=y?100-r:r),l=(v-m)/100*r+m,U(G,l)}function U(e,t){return t=s(t),void 0===e&&(e=G),p&&(0===e&&t>h[1]?f?r(0,h[1]=t,h):t=h[1]:1===e&&t<h[0]&&(f?r(0,h[0]=t,h):t=h[0])),h[e]!==t&&r(0,h[e]=t,h),L!==t&&(!x&&Q("change",{activeHandle:G,startValue:O,previousValue:void 0===L?O:L,value:h[G],values:h.map((e=>s(e)))}),L=t),t}function Y(){!x&&Q("stop",{activeHandle:G,startValue:O,value:h[G],values:h.map((e=>s(e)))})}return t.$$set=e=>{"range"in e&&r(1,p=e.range),"pushy"in e&&r(43,f=e.pushy),"min"in e&&r(2,m=e.min),"max"in e&&r(3,v=e.max),"step"in e&&r(4,g=e.step),"values"in e&&r(0,h=e.values),"vertical"in e&&r(5,$=e.vertical),"float"in e&&r(6,b=e.float),"reversed"in e&&r(7,y=e.reversed),"hoverable"in e&&r(8,w=e.hoverable),"disabled"in e&&r(9,x=e.disabled),"pips"in e&&r(10,C=e.pips),"pipstep"in e&&r(11,k=e.pipstep),"all"in e&&r(12,T=e.all),"first"in e&&r(13,_=e.first),"last"in e&&r(14,z=e.last),"rest"in e&&r(15,M=e.rest),"id"in e&&r(16,q=e.id),"prefix"in e&&r(17,S=e.prefix),"suffix"in e&&r(18,j=e.suffix),"formatter"in e&&r(19,F=e.formatter),"handleFormatter"in e&&r(20,W=e.handleFormatter),"precision"in e&&r(44,R=e.precision),"springValues"in e&&r(45,A=e.springValues)},t.$$.update=()=>{12&t.$$.dirty[0]&&r(48,a=function(e){return e<=m?m:e>=v?v:e}),28&t.$$.dirty[0]|139264&t.$$.dirty[1]&&r(47,s=function(e){if(e<=m)return m;if(e>=v)return v;let t=(e-m)%g,n=e-t;return 2*Math.abs(t)>=g&&(n+=t>0?g:-g),n=a(n),parseFloat(n.toFixed(R))}),12&t.$$.dirty[0]|8192&t.$$.dirty[1]&&r(22,l=function(e){let t=(e-m)/(v-m)*100;return isNaN(t)||t<=0?0:t>=100?100:parseFloat(t.toFixed(R))}),6291469&t.$$.dirty[0]|114688&t.$$.dirty[1]&&(Array.isArray(h)||(r(0,h=[(v+m)/2]),console.error("'values' prop should be an Array (https://github.com/simeydotme/svelte-range-slider-pips#slider-props)")),r(0,h=function(e){return"min"===p||"max"===p?e.slice(0,1):p?e.slice(0,2):e}(h.map((e=>s(e))))),I!==h.length?(r(21,E=ze(h.map((e=>l(e))),A)),d(),d=o(E,(e=>r(29,u=e)))):E.set(h.map((e=>l(e)))),r(46,I=h.length)),160&t.$$.dirty[0]&&r(28,i=$?y?"top":"bottom":y?"right":"left"),160&t.$$.dirty[0]&&r(27,c=$?y?"bottom":"top":y?"left":"right")},[h,p,m,v,g,$,b,y,w,x,C,k,T,_,z,M,q,S,j,F,W,E,l,D,P,H,G,c,i,u,U,function(e){return"min"===p?0:e[0]},function(e){return"max"===p?0:"min"===p?100-e[0]:100-e[1]},function(e){B&&(r(24,P=!1),V=!1,r(25,H=!1))},function(e){x||(r(26,G=et(e.target)),r(24,P=!0))},function(e){if(!x){const t=et(e.target);let n=e.ctrlKey||e.metaKey||e.shiftKey?10*g:g,r=!1;switch(e.key){case"PageDown":n*=10;case"ArrowRight":case"ArrowUp":U(t,h[t]+n),r=!0;break;case"PageUp":n*=10;case"ArrowLeft":case"ArrowDown":U(t,h[t]-n),r=!0;break;case"Home":U(t,m),r=!0;break;case"End":U(t,v),r=!0}r&&(e.preventDefault(),e.stopPropagation())}},function(e){if(!x){const t=e.target,n=tt(e);r(24,P=!0),V=!0,r(25,H=!0),r(26,G=function(e){const t=K();let n,r=0,l=0,a=0;return $?(r=e.clientY-t.top,l=r/t.height*100,l=y?l:100-l):(r=e.clientX-t.left,l=r/t.width*100,l=y?100-l:l),a=(v-m)/100*l+m,!0===p&&h[0]===h[1]?a>h[1]?1:0:(n=h.indexOf([...h].sort(((e,t)=>Math.abs(a-e)-Math.abs(a-t)))[0]),n)}(n)),O=L=s(h[G]),!x&&Q("start",{activeHandle:G,value:O,values:h.map((e=>s(e)))}),"touchstart"!==e.type||t.matches(".pipVal")||J(n)}},function(e){"touchend"===e.type&&Y(),r(25,H=!1)},function(e){B=!1,P&&e.target!==D&&!D.contains(e.target)&&r(24,P=!1)},function(e){x||V&&J(tt(e))},function(e){if(!x){const t=e.target;V&&((t===D||D.contains(t))&&(r(24,P=!0),function(e){const t=D.querySelectorAll(".handle"),n=Array.prototype.includes.call(t,e),r=Array.prototype.some.call(t,(t=>t.contains(e)));return n||r}(t)||t.matches(".pipVal")||J(tt(e))),Y())}V=!1,r(25,H=!1)},function(e){V=!1,r(25,H=!1)},function(e){x||(e.target===D||D.contains(e.target))&&(B=!0)},f,R,A,I,s,a,function(e){N[e?"unshift":"push"]((()=>{D=e,r(23,D)}))}]}class rt extends xe{constructor(e){super(),we(this,e,nt,Xe,s,{range:1,pushy:43,min:2,max:3,step:4,values:0,vertical:5,float:6,reversed:7,hoverable:8,disabled:9,pips:10,pipstep:11,all:12,first:13,last:14,rest:15,id:16,prefix:17,suffix:18,formatter:19,handleFormatter:20,precision:44,springValues:45},null,[-1,-1,-1])}}function lt(e){let t;return{c(){t=C("div"),S(t,"class","gauge__fill centerMark svelte-141x32p")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function at(e){let t;return{c(){t=C("div"),S(t,"class","gauge__fill lowZone svelte-141x32p")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function st(e){let t;return{c(){t=C("div"),S(t,"class","gauge__fill hiZone svelte-141x32p")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function ot(e){let t,n,r,l=(100*e[0]).toFixed()+"";return{c(){t=C("div"),n=T(l),r=T("%"),S(t,"class","gauge__cover svelte-141x32p")},m(e,l){y(e,t,l),h(t,n),h(t,r)},p(e,t){1&t&&l!==(l=(100*e[0]).toFixed()+"")&&F(n,l)},d(e){e&&w(t)}}}function it(e){let t,n;return{c(){t=C("div"),n=T(e[1]),S(t,"class","gauge__cover svelte-141x32p")},m(e,r){y(e,t,r),h(t,n)},p(e,t){2&t&&F(n,e[1])},d(e){e&&w(t)}}}function ct(t){let n,r,l,a,s,o,i,c=t[2]&&lt(),u=t[3]&&at(),d=t[4]&&st();function p(e,t){return null!==e[1]?it:ot}let f=p(t),m=f(t);return{c(){n=C("div"),r=C("div"),l=C("div"),a=_(),c&&c.c(),s=_(),u&&u.c(),o=_(),d&&d.c(),i=_(),m.c(),S(l,"class","gauge__fill svelte-141x32p"),S(l,"style",t[5]),Q(l,"needle",t[2]),S(r,"class","gauge__body svelte-141x32p"),S(n,"class","gauge svelte-141x32p"),S(n,"data-testid","gauge")},m(e,t){y(e,n,t),h(n,r),h(r,l),h(r,a),c&&c.m(r,null),h(r,s),u&&u.m(r,null),h(r,o),d&&d.m(r,null),h(r,i),m.m(r,null)},p(e,[t]){32&t&&S(l,"style",e[5]),4&t&&Q(l,"needle",e[2]),e[2]?c||(c=lt(),c.c(),c.m(r,s)):c&&(c.d(1),c=null),e[3]?u||(u=at(),u.c(),u.m(r,o)):u&&(u.d(1),u=null),e[4]?d||(d=st(),d.c(),d.m(r,i)):d&&(d.d(1),d=null),f===(f=p(e))&&m?m.p(e,t):(m.d(1),m=f(e),m&&(m.c(),m.m(r,null)))},i:e,o:e,d(e){e&&w(n),c&&c.d(),u&&u.d(),d&&d.d(),m.d()}}}function ut(e,t,n){let r,l,{value:a=.5}=t,{label:s=null}=t,{needle:o=!1}=t,{lowZone:i=!1}=t,{hiZone:c=!1}=t;return e.$$set=e=>{"value"in e&&n(0,a=e.value),"label"in e&&n(1,s=e.label),"needle"in e&&n(2,o=e.needle),"lowZone"in e&&n(3,i=e.lowZone),"hiZone"in e&&n(4,c=e.hiZone)},e.$$.update=()=>{1&e.$$.dirty&&n(6,r=+a<=0?.02:+a>=1?.98:+a),64&e.$$.dirty&&n(5,l=`transform: rotate(${(r/2).toFixed(4)}turn)`)},[a,s,o,i,c,l,r]}class dt extends xe{constructor(e){super(),we(this,e,ut,ct,s,{value:0,label:1,needle:2,lowZone:3,hiZone:4})}}function pt(e,{delay:n=0,duration:r=400,easing:l=t}={}){const a=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:l,css:e=>"opacity: "+e*a}}var ft;const mt="gbSettings",vt="4.0.5",gt=ke("chart"),ht={srsCounts:{expectedDaily:0,new:{radicals:0,kanji:0,vocabulary:0,total:0},apprentice:{early:0,late:0,total:0},lesson:0,guru:0,master:0,enlightened:0,burned:0},sessionSummaries:[],reviewCounts:[],gbSettings:{version:vt,daysToReview:4,position:"Top",bgColor:"#f4f4f4",trackColor:"#e0e0e0",textColor:"#333333",hlTextColor:"#fbb623",fillColor:"#59c273",warnColor:"#fbb623",hlTrackColor:"#d1e8d4",gbMinTarget:130,gbMaxTarget:170,aboveTerm:"休",belowTerm:"努力",inRangeTerm:"良",newRWeight:.6,newKWeight:3,newVWeight:1,apprWeight:1,guruWeight:.1,masterWeight:0,enlightenedWeight:0,minQPM:7,maxQPM:10,madCutoff:10,rpdMin:120,rpdMax:180,tzOffset:0,rQuiz:!1,kQuiz:!0,vQuiz:!1}},$t=e=>JSON.parse(e).map((e=>Object.assign(Object.assign({},e),{start:new Date(e.start),end:new Date(e.end)}))),bt=localStorage.getItem("srsCounts"),yt=ke(bt?JSON.parse(bt):ht.srsCounts);yt.subscribe((e=>{localStorage.setItem("srsCounts",JSON.stringify(e))}));const wt=localStorage.getItem("sessionSummaries"),xt=ke(wt?$t(wt):ht.sessionSummaries);xt.subscribe((e=>{localStorage.setItem("sessionSummaries",JSON.stringify(e))}));const Ct=localStorage.getItem("reviewCounts"),kt=ke(Ct?$t(Ct):ht.reviewCounts);kt.subscribe((e=>{localStorage.setItem("reviewCounts",JSON.stringify(e))}));const Tt=ht.gbSettings,_t=ke(null!==(ft=JSON.parse(localStorage.getItem(mt)))&&void 0!==ft?ft:Tt);_t.subscribe((e=>{e.version===vt?localStorage.setItem(mt,JSON.stringify(e)):(_t.set(Tt),yt.set(ht.srsCounts),xt.set(ht.sessionSummaries),kt.set(ht.reviewCounts))}));function zt(t){let n,r,l,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k,z,M,q,j,W,R,A,Q,D,O,L,E,I,P,V,Z,H,B,N,G,K,J,U,X,ee,te,ne,re,le,ae,se,oe,ie,ce,ue,de,pe,fe,ve=t[3].new.radicals+"",ge=t[3].new.kanji+"",he=t[3].new.vocabulary+"",$e=t[3].apprentice.total+"",be=t[3].apprentice.early+"",ye=t[3].guru+"",we=t[3].master+"",xe=t[3].enlightened+"",Ce=t[0].toFixed()+"",ke=t[2].gbMinTarget+"",Te=t[2].gbMaxTarget+"";return{c(){n=C("h1"),r=T("GanbarOmeter: "),l=T(t[5]),s=_(),o=C("div"),i=C("table"),c=C("tr"),u=C("th"),u.textContent="Early Apprentice",d=_(),p=C("td"),f=T(ve),m=C("span"),m.textContent="r",v=_(),g=T(ge),$=C("span"),$.textContent="k",b=_(),x=T(he),k=C("span"),k.textContent="v",z=_(),M=C("tr"),q=C("th"),q.textContent="Apprentice",j=_(),W=C("td"),R=T($e),A=_(),Q=C("span"),D=T("items\n            ("),O=T(be),L=T(" early-stage)"),E=_(),I=C("tr"),P=C("th"),P.textContent="Learned",V=_(),Z=C("td"),H=T(ye),B=C("span"),B.textContent="g",N=_(),G=T(we),K=C("span"),K.textContent="m",J=_(),U=T(xe),X=C("span"),X.textContent="e",ee=_(),te=C("tr"),ne=C("th"),ne.textContent="Weighted count",re=_(),le=C("td"),ae=T(Ce),se=_(),oe=C("span"),ie=T("(target "),ce=T(ke),ue=T("–"),de=T(Te),pe=T(")"),S(n,"class","gbHeader"),S(m,"class","secondary"),S($,"class","secondary"),S(k,"class","secondary"),S(Q,"class","secondary"),S(B,"class","secondary"),S(K,"class","secondary"),S(X,"class","secondary"),S(oe,"class","secondary"),S(i,"class","gbContent"),S(o,"data-testid","ganbarometer-table")},m(e,t){y(e,n,t),h(n,r),h(n,l),y(e,s,t),y(e,o,t),h(o,i),h(i,c),h(c,u),h(c,d),h(c,p),h(p,f),h(p,m),h(p,v),h(p,g),h(p,$),h(p,b),h(p,x),h(p,k),h(i,z),h(i,M),h(M,q),h(M,j),h(M,W),h(W,R),h(W,A),h(W,Q),h(Q,D),h(Q,O),h(Q,L),h(i,E),h(i,I),h(I,P),h(I,V),h(I,Z),h(Z,H),h(Z,B),h(Z,N),h(Z,G),h(Z,K),h(Z,J),h(Z,U),h(Z,X),h(i,ee),h(i,te),h(te,ne),h(te,re),h(te,le),h(le,ae),h(le,se),h(le,oe),h(oe,ie),h(oe,ce),h(oe,ue),h(oe,de),h(oe,pe)},p(e,t){32&t&&F(l,e[5]),8&t&&ve!==(ve=e[3].new.radicals+"")&&F(f,ve),8&t&&ge!==(ge=e[3].new.kanji+"")&&F(g,ge),8&t&&he!==(he=e[3].new.vocabulary+"")&&F(x,he),8&t&&$e!==($e=e[3].apprentice.total+"")&&F(R,$e),8&t&&be!==(be=e[3].apprentice.early+"")&&F(O,be),8&t&&ye!==(ye=e[3].guru+"")&&F(H,ye),8&t&&we!==(we=e[3].master+"")&&F(G,we),8&t&&xe!==(xe=e[3].enlightened+"")&&F(U,xe),1&t&&Ce!==(Ce=e[0].toFixed()+"")&&F(ae,Ce),4&t&&ke!==(ke=e[2].gbMinTarget+"")&&F(ce,ke),4&t&&Te!==(Te=e[2].gbMaxTarget+"")&&F(de,Te)},i(e){a||Y((()=>{a=me(n,pt,{}),a.start()})),fe||Y((()=>{fe=me(o,pt,{}),fe.start()}))},o:e,d(e){e&&w(n),e&&w(s),e&&w(o)}}}function Mt(e){let t,n,r,l,a,s;return r=new dt({props:{value:e[1],label:e[4],needle:!0,lowZone:!0,hiZone:!0}}),{c(){t=C("h1"),t.textContent="GanbarOmeter",n=_(),he(r.$$.fragment),l=_(),a=C("div"),a.innerHTML='<span class="left-aligned svelte-1rtibr8">遅</span><span class="right-aligned svelte-1rtibr8">早</span>',S(t,"class","gbHeader"),S(a,"class","units svelte-1rtibr8")},m(e,o){y(e,t,o),y(e,n,o),$e(r,e,o),y(e,l,o),y(e,a,o),s=!0},p(e,t){const n={};2&t&&(n.value=e[1]),16&t&&(n.label=e[4]),r.$set(n)},i(e){s||(de(r.$$.fragment,e),s=!0)},o(e){pe(r.$$.fragment,e),s=!1},d(e){e&&w(t),e&&w(n),be(r,e),e&&w(l),e&&w(a)}}}function qt(e){let t,n,r,l;const a=[Mt,zt],s=[];function o(e,t){return"chart"===e[6]?0:1}return n=o(e),r=s[n]=a[n](e),{c(){t=C("div"),r.c(),S(t,"class","gbWidget"),R(t,"--trackColor",e[2].hlTrackColor),R(t,"--hlTrackColor",e[2].trackColor)},m(e,r){y(e,t,r),s[n].m(t,null),l=!0},p(e,[i]){let c=n;n=o(e),n===c?s[n].p(e,i):(ce(),pe(s[c],1,1,(()=>{s[c]=null})),ue(),r=s[n],r?r.p(e,i):(r=s[n]=a[n](e),r.c()),de(r,1),r.m(t,null)),(!l||4&i)&&R(t,"--trackColor",e[2].hlTrackColor),(!l||4&i)&&R(t,"--hlTrackColor",e[2].trackColor)},i(e){l||(de(r),l=!0)},o(e){pe(r),l=!1},d(e){e&&w(t),s[n].d()}}}function St(e,t,n){let r,l,a,s,o,c,u,d,p,f;i(e,_t,(e=>n(2,d=e))),i(e,yt,(e=>n(3,p=e))),i(e,gt,(e=>n(6,f=e)));const m=2/3*.5;return e.$$.update=()=>{12&e.$$.dirty&&n(0,r=p.new.radicals*d.newRWeight+p.new.kanji*d.newKWeight+p.new.vocabulary*d.newVWeight+p.apprentice.late*d.apprWeight+p.guru*d.guruWeight+p.master*d.masterWeight+p.enlightened*d.enlightenedWeight),4&e.$$.dirty&&n(9,l=m/(d.gbMaxTarget-d.gbMinTarget)),517&e.$$.dirty&&n(8,a=m+(r-d.gbMinTarget)*l),256&e.$$.dirty&&n(1,s=a<0?0:a>1?1:a),2&e.$$.dirty&&n(7,o=(s-.5).toFixed(2)),130&e.$$.dirty&&n(5,c=s>.5?"+"+o:o),5&e.$$.dirty&&n(4,u=r<d.gbMinTarget?d.belowTerm:r>d.gbMaxTarget?d.aboveTerm:d.inRangeTerm)},(async()=>{wkof.include("ItemData"),await wkof.ready("ItemData");const e=await wkof.ItemData.get_items("subjects,assignments"),t=await wkof.ItemData.get_index(e,"srs_stage"),n=Object.assign({0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],"-1":[]},t),r=[...n[1],...n[2]],l=r.filter((e=>"radical"===e.object)),a=r.filter((e=>"kanji"===e.object)),s=r.filter((e=>"vocabulary"===e.object)),o=[0,.5,1,1,2,7,14,30,120,0];let i=[];return[0,1,2,3,4,5,6,7,8,9,-1].forEach((e=>{i[e]=n[e].length})),{expectedDaily:[1,2,3,4,5,6,7,8].map((e=>i[e]/o[e])).reduce(((e,t)=>e+t)),new:{radicals:l.length,kanji:a.length,vocabulary:s.length,total:r.length},apprentice:{early:i[1]+i[2],late:i[3]+i[4],total:i[1]+i[2]+i[3]+i[4]},lesson:i[0],guru:i[5]+i[6],master:i[7],enlightened:i[8],burned:i[9]}})().then((e=>yt.set(e))),[r,s,d,p,u,c,f,o,a,l]}class jt extends xe{constructor(e){super(),we(this,e,St,qt,s,{})}}function Ft(e,t,n){const r=e.slice();return r[18]=t[n],r[20]=n,r}function Wt(t){let n,r,l,a,s,o,i,c,u,d,p,f,m,v,g,$,b,k,z,M=t[1].toFixed(1)+"",q=t[0].toFixed(1)+"",j=t[4].length+"",W=t[4].reverse(),R=[];for(let e=0;e<W.length;e+=1)R[e]=At(Ft(t,W,e));return{c(){n=C("h1"),r=T("Speed: "),l=T(M),a=T(" s/q • "),s=T(q),o=T(" q/m"),c=_(),u=C("div"),d=C("div"),p=C("h4"),f=T(j),m=T(" sessions • "),v=T(t[7]),g=T(" items • "),$=T(t[2]),b=T(" questions"),k=_();for(let e=0;e<R.length;e+=1)R[e].c();S(n,"class","gbHeader"),S(p,"class","svelte-ziwm73"),S(d,"class","gbContent scrollbox svelte-ziwm73"),S(u,"data-testid","speed-table")},m(e,t){y(e,n,t),h(n,r),h(n,l),h(n,a),h(n,s),h(n,o),y(e,c,t),y(e,u,t),h(u,d),h(d,p),h(p,f),h(p,m),h(p,v),h(p,g),h(p,$),h(p,b),h(d,k);for(let e=0;e<R.length;e+=1)R[e].m(d,null)},p(e,t){if(2&t&&M!==(M=e[1].toFixed(1)+"")&&F(l,M),1&t&&q!==(q=e[0].toFixed(1)+"")&&F(s,q),16&t&&j!==(j=e[4].length+"")&&F(f,j),128&t&&F(v,e[7]),4&t&&F($,e[2]),32272&t){let n;for(W=e[4].reverse(),n=0;n<W.length;n+=1){const r=Ft(e,W,n);R[n]?R[n].p(r,t):(R[n]=At(r),R[n].c(),R[n].m(d,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=W.length}},i(e){i||Y((()=>{i=me(n,pt,{}),i.start()})),z||Y((()=>{z=me(u,pt,{}),z.start()}))},o:e,d(e){e&&w(n),e&&w(c),e&&w(u),x(R,e)}}}function Rt(e){let t,n,r,l,a,s;return r=new dt({props:{value:e[5],label:e[6],needle:!0,lowZone:!0,hiZone:!0}}),{c(){t=C("h1"),t.textContent="Speed",n=_(),he(r.$$.fragment),l=_(),a=C("div"),a.textContent="questions/min",S(t,"class","gbHeader"),S(a,"class","units")},m(e,o){y(e,t,o),y(e,n,o),$e(r,e,o),y(e,l,o),y(e,a,o),s=!0},p(e,t){const n={};32&t&&(n.value=e[5]),64&t&&(n.label=e[6]),r.$set(n)},i(e){s||(de(r.$$.fragment,e),s=!0)},o(e){pe(r.$$.fragment,e),s=!1},d(e){e&&w(t),e&&w(n),be(r,e),e&&w(l),e&&w(a)}}}function At(e){let t,n,r,l,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k,z,M,q,j,W,R,A,Q,D,O=e[20]+1+"",L=e[10](e[18].start)+"",E=e[11](e[18].end)+"",I=(e[9](e[18])/60).toFixed()+"",P=e[18].reviewCount+"",V=e[18].questionCount+"",Z=e[13](e[9](e[18]),e[18].questionCount)+"",H=e[14](e[9](e[18]),e[18].questionCount)+"",B=e[18].correctAnswerCount+"",N=e[18].questionCount+"",G=e[12](e[18])+"";return{c(){t=C("article"),n=C("h5"),r=T(O),l=T(": "),a=T(L),s=T(" – "),o=T(E),i=T("\n            ("),c=T(I),u=T("m)"),d=_(),p=C("p"),f=T(P),m=T(" items • "),v=T(V),g=T(" questions •\n            "),$=T(Z),b=T(" s/q •\n            "),x=T(H),k=T(" q/m"),z=C("br"),M=_(),q=T(B),j=T("/"),W=T(N),R=T(" =\n            "),A=T(G),Q=T("% correct"),D=_(),S(n,"class","svelte-ziwm73"),S(p,"class","svelte-ziwm73"),S(t,"class","svelte-ziwm73")},m(e,w){y(e,t,w),h(t,n),h(n,r),h(n,l),h(n,a),h(n,s),h(n,o),h(n,i),h(n,c),h(n,u),h(t,d),h(t,p),h(p,f),h(p,m),h(p,v),h(p,g),h(p,$),h(p,b),h(p,x),h(p,k),h(p,z),h(p,M),h(p,q),h(p,j),h(p,W),h(p,R),h(p,A),h(p,Q),h(t,D)},p(e,t){16&t&&L!==(L=e[10](e[18].start)+"")&&F(a,L),16&t&&E!==(E=e[11](e[18].end)+"")&&F(o,E),16&t&&I!==(I=(e[9](e[18])/60).toFixed()+"")&&F(c,I),16&t&&P!==(P=e[18].reviewCount+"")&&F(f,P),16&t&&V!==(V=e[18].questionCount+"")&&F(v,V),16&t&&Z!==(Z=e[13](e[9](e[18]),e[18].questionCount)+"")&&F($,Z),16&t&&H!==(H=e[14](e[9](e[18]),e[18].questionCount)+"")&&F(x,H),16&t&&B!==(B=e[18].correctAnswerCount+"")&&F(q,B),16&t&&N!==(N=e[18].questionCount+"")&&F(W,N),16&t&&G!==(G=e[12](e[18])+"")&&F(A,G)},d(e){e&&w(t)}}}function Qt(e){let t,n,r,l;const a=[Rt,Wt],s=[];function o(e,t){return"chart"===e[8]?0:1}return n=o(e),r=s[n]=a[n](e),{c(){t=C("div"),r.c(),S(t,"class","gbWidget svelte-ziwm73"),S(t,"data-testid","speedWidget"),R(t,"--trackColor",e[3].hlTrackColor),R(t,"--hlTrackColor",e[3].trackColor)},m(e,r){y(e,t,r),s[n].m(t,null),l=!0},p(e,[i]){let c=n;n=o(e),n===c?s[n].p(e,i):(ce(),pe(s[c],1,1,(()=>{s[c]=null})),ue(),r=s[n],r?r.p(e,i):(r=s[n]=a[n](e),r.c()),de(r,1),r.m(t,null)),(!l||8&i)&&R(t,"--trackColor",e[3].hlTrackColor),(!l||8&i)&&R(t,"--hlTrackColor",e[3].trackColor)},i(e){l||(de(r),l=!0)},o(e){pe(r),l=!1},d(e){e&&w(t),s[n].d()}}}function Dt(e,t,n){let r,l,a,s,o,c,u,d,p,f;i(e,_t,(e=>n(3,d=e))),i(e,xt,(e=>n(4,p=e))),i(e,gt,(e=>n(8,f=e)));const m=e=>(e.end-e.start)/1e3;let v;const g=2/3*.5;return e.$$.update=()=>{16&e.$$.dirty&&n(7,r=p.reduce(((e,t)=>e+ +t.reviewCount),0)),16&e.$$.dirty&&n(2,l=p.reduce(((e,t)=>e+ +t.questionCount),0)),16&e.$$.dirty&&n(15,v=p.reduce(((e,t)=>e+m(t)),0)),32772&e.$$.dirty&&n(1,a=l>0?v/l:0),2&e.$$.dirty&&n(0,s=60/a),1&e.$$.dirty&&n(6,o=`${s.toFixed(1)}`),8&e.$$.dirty&&n(16,c=g/(d.maxQPM-d.minQPM)),65545&e.$$.dirty&&n(5,u=g+(s-d.minQPM)*c)},[s,a,l,d,p,u,o,r,f,m,e=>Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(e),e=>Intl.DateTimeFormat("en-US",{timeStyle:"short"}).format(e),e=>(100*e.correctAnswerCount/e.questionCount).toFixed(1),(e,t)=>(e/t).toFixed(1),(e,t)=>(60*t/e).toFixed(1),v,c]}class Ot extends xe{constructor(e){super(),we(this,e,Dt,Qt,s,{})}}function Lt(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function Et(e){let t;return{c(){t=C("td"),S(t,"aria-label","percents"),S(t,"class","percents svelte-qotrzq"),R(t,"height",(100*e[1][e[13]]).toFixed(1)+"%")},m(e,n){y(e,t,n)},p(e,n){2&n&&R(t,"height",(100*e[1][e[13]]).toFixed(1)+"%")},d(e){e&&w(t)}}}function It(e){let t,n,r,l=(100*e[1][e[13]]).toFixed()+"";return{c(){t=C("br"),n=T(l),r=T("%")},m(e,l){y(e,t,l),y(e,n,l),y(e,r,l)},p(e,t){2&t&&l!==(l=(100*e[1][e[13]]).toFixed()+"")&&F(n,l)},d(e){e&&w(t),e&&w(n),e&&w(r)}}}function Pt(e){let t,n,r,l,a,s,o,i,c,u=(e[2][e[13]]?e[2][e[13]]:"")+"",d=e[11]+"",p=e[1].length&&Et(e),f=e[1].length&&It(e);return{c(){t=C("tr"),n=C("th"),r=T(u),l=_(),a=C("td"),s=_(),p&&p.c(),o=_(),i=C("span"),c=T(d),f&&f.c(),S(n,"scope","row"),S(n,"aria-label","label"),S(n,"class","svelte-qotrzq"),S(a,"aria-label","value"),S(a,"class","svelte-qotrzq"),S(i,"class","displayBox svelte-qotrzq"),S(i,"data-testid","displayBox"),S(t,"aria-label","values"),R(t,"height",e[10][e[13]]+"%"),S(t,"class","svelte-qotrzq")},m(e,u){y(e,t,u),h(t,n),h(n,r),h(t,l),h(t,a),h(t,s),p&&p.m(t,null),h(t,o),h(t,i),h(i,c),f&&f.m(i,null)},p(e,n){4&n&&u!==(u=(e[2][e[13]]?e[2][e[13]]:"")+"")&&F(r,u),e[1].length?p?p.p(e,n):(p=Et(e),p.c(),p.m(t,o)):p&&(p.d(1),p=null),1&n&&d!==(d=e[11]+"")&&F(c,d),e[1].length?f?f.p(e,n):(f=It(e),f.c(),f.m(i,null)):f&&(f.d(1),f=null),1024&n&&R(t,"height",e[10][e[13]]+"%")},d(e){e&&w(t),p&&p.d(),f&&f.d()}}}function Vt(t){let n,r,l,a,s,o,i,c,u,d,p,f,m,v,g,$,b,k=t[0],z=[];for(let e=0;e<k.length;e+=1)z[e]=Pt(Lt(t,k,e));return{c(){n=C("table"),r=C("thead"),r.innerHTML='<tr class="svelte-qotrzq"><th scope="col" class="svelte-qotrzq">Item</th> \n      <th scope="col" class="svelte-qotrzq">Value</th></tr>',l=_(),a=C("tbody");for(let e=0;e<z.length;e+=1)z[e].c();s=_(),o=C("div"),c=_(),u=C("div"),p=_(),f=C("p"),m=T(t[4]),v=_(),g=T(t[5]),$=_(),b=T(t[3]),S(r,"class","svelte-qotrzq"),S(o,"class","minmax svelte-qotrzq"),o.hidden=i=t[4]+t[5]===0,R(o,"bottom",t[7]+"%"),R(o,"height",t[8]+"%"),u.hidden=d=0===t[9],S(u,"class","expected svelte-qotrzq"),R(u,"height",t[9]+"%"),S(a,"class","svelte-qotrzq"),S(n,"class","graph svelte-qotrzq"),S(n,"aria-label","bar-chart"),R(n,"--max-label",t[6].toFixed()),f.hidden=!0},m(e,t){y(e,n,t),h(n,r),h(n,l),h(n,a);for(let e=0;e<z.length;e+=1)z[e].m(a,null);h(a,s),h(a,o),h(a,c),h(a,u),y(e,p,t),y(e,f,t),h(f,m),h(f,v),h(f,g),h(f,$),h(f,b)},p(e,[t]){if(1031&t){let n;for(k=e[0],n=0;n<k.length;n+=1){const r=Lt(e,k,n);z[n]?z[n].p(r,t):(z[n]=Pt(r),z[n].c(),z[n].m(a,s))}for(;n<z.length;n+=1)z[n].d(1);z.length=k.length}48&t&&i!==(i=e[4]+e[5]===0)&&(o.hidden=i),128&t&&R(o,"bottom",e[7]+"%"),256&t&&R(o,"height",e[8]+"%"),512&t&&d!==(d=0===e[9])&&(u.hidden=d),512&t&&R(u,"height",e[9]+"%"),64&t&&R(n,"--max-label",e[6].toFixed()),16&t&&F(m,e[4]),32&t&&F(g,e[5]),8&t&&F(b,e[3])},i:e,o:e,d(e){e&&w(n),x(z,e),e&&w(p),e&&w(f)}}}function Zt(e,t,n){let r,l,a,s,o,{values:i}=t,{percents:c=[]}=t,{labels:u=[]}=t,{expected:d=0}=t,{minTarget:p=0}=t,{maxTarget:f=0}=t;return e.$$set=e=>{"values"in e&&n(0,i=e.values),"percents"in e&&n(1,c=e.percents),"labels"in e&&n(2,u=e.labels),"expected"in e&&n(3,d=e.expected),"minTarget"in e&&n(4,p=e.minTarget),"maxTarget"in e&&n(5,f=e.maxTarget)},e.$$.update=()=>{41&e.$$.dirty&&n(6,r=Math.max(...i,d,f)),65&e.$$.dirty&&n(10,l=i.map((e=>Math.round(e/r*100)))),72&e.$$.dirty&&n(9,a=Math.round(d/r*100)),112&e.$$.dirty&&n(8,s=Math.round((f-p)/r*100)),80&e.$$.dirty&&n(7,o=Math.round(p/r*100))},[i,c,u,d,p,f,r,o,s,a,l]}class Ht extends xe{constructor(e){super(),we(this,e,Zt,Vt,s,{values:0,percents:1,labels:2,expected:3,minTarget:4,maxTarget:5})}}function Bt(t){let n,r,l,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k,z,M,q,j,W,R,A,Q,D,O,L,E,I,P,V,Z,H,B,N,G,K=t[4].toFixed()+"",J=t[9].expectedDaily.toFixed()+"",U=t[3].rpdMin+"",X=t[3].rpdMax+"",ee=t[10](t[2][t[2].length-1]?.start)+"",te=t[2][t[2].length-1]?.review_count+"",ne=(100*t[0][t[0].length-1]).toFixed()+"";function re(e,t){return e[2].length>2?Kt:2===e[2].length?Gt:void 0}let le=re(t),ae=le&&le(t);return{c(){n=C("h1"),r=T(t[1]),l=T(" Reviews @"),a=T(K),s=T("%"),i=_(),c=C("div"),u=C("table"),d=C("tr"),p=C("th"),p.textContent="Expected Daily:",f=_(),m=C("td"),v=T(J),g=_(),$=C("span"),b=T("(avg.: "),x=T(t[6]),k=T(", target: "),z=T(U),M=T("–"),q=T(X),j=T(")"),W=_(),R=C("tr"),A=C("th"),Q=T("Latest ("),D=T(ee),O=T("):"),L=_(),E=C("td"),I=T(te),P=_(),V=C("span"),Z=T("reviews @ "),H=T(ne),B=T("%"),N=_(),ae&&ae.c(),S(n,"class","gbHeader"),S($,"class","secondary"),S(V,"class","secondary"),S(u,"class","gbContent"),S(c,"data-testid","reviews-per-day-table")},m(e,t){y(e,n,t),h(n,r),h(n,l),h(n,a),h(n,s),y(e,i,t),y(e,c,t),h(c,u),h(u,d),h(d,p),h(d,f),h(d,m),h(m,v),h(m,g),h(m,$),h($,b),h($,x),h($,k),h($,z),h($,M),h($,q),h($,j),h(u,W),h(u,R),h(R,A),h(A,Q),h(A,D),h(A,O),h(R,L),h(R,E),h(E,I),h(E,P),h(E,V),h(V,Z),h(V,H),h(V,B),h(u,N),ae&&ae.m(u,null)},p(e,t){2&t&&F(r,e[1]),16&t&&K!==(K=e[4].toFixed()+"")&&F(a,K),512&t&&J!==(J=e[9].expectedDaily.toFixed()+"")&&F(v,J),64&t&&F(x,e[6]),8&t&&U!==(U=e[3].rpdMin+"")&&F(z,U),8&t&&X!==(X=e[3].rpdMax+"")&&F(q,X),4&t&&ee!==(ee=e[10](e[2][e[2].length-1]?.start)+"")&&F(D,ee),4&t&&te!==(te=e[2][e[2].length-1]?.review_count+"")&&F(I,te),1&t&&ne!==(ne=(100*e[0][e[0].length-1]).toFixed()+"")&&F(H,ne),le===(le=re(e))&&ae?ae.p(e,t):(ae&&ae.d(1),ae=le&&le(e),ae&&(ae.c(),ae.m(u,null)))},i(e){o||Y((()=>{o=me(n,pt,{}),o.start()})),G||Y((()=>{G=me(c,pt,{}),G.start()}))},o:e,d(e){e&&w(n),e&&w(i),e&&w(c),ae&&ae.d()}}}function Nt(e){let t,n,r,l;return r=new Ht({props:{values:e[5],labels:e[7],expected:e[9].expectedDaily,minTarget:e[3].rpdMin,maxTarget:e[3].rpdMax,percents:e[0]}}),{c(){t=C("h1"),t.textContent="Reviews",n=_(),he(r.$$.fragment),S(t,"class","gbHeader")},m(e,a){y(e,t,a),y(e,n,a),$e(r,e,a),l=!0},p(e,t){const n={};32&t&&(n.values=e[5]),128&t&&(n.labels=e[7]),512&t&&(n.expected=e[9].expectedDaily),8&t&&(n.minTarget=e[3].rpdMin),8&t&&(n.maxTarget=e[3].rpdMax),1&t&&(n.percents=e[0]),r.$set(n)},i(e){l||(de(r.$$.fragment,e),l=!0)},o(e){pe(r.$$.fragment,e),l=!1},d(e){e&&w(t),e&&w(n),be(r,e)}}}function Gt(e){let t,n,r,l,a,s,o,i,c,u=e[10](e[2][0].start)+"",d=e[2][0].review_count+"";return{c(){t=C("tr"),n=C("th"),r=T(u),l=T(":"),a=_(),s=C("td"),o=T(d),i=_(),c=C("span"),c.textContent="reviews",S(c,"class","secondary")},m(e,u){y(e,t,u),h(t,n),h(n,r),h(n,l),h(t,a),h(t,s),h(s,o),h(s,i),h(s,c)},p(e,t){4&t&&u!==(u=e[10](e[2][0].start)+"")&&F(r,u),4&t&&d!==(d=e[2][0].review_count+"")&&F(o,d)},d(e){e&&w(t)}}}function Kt(e){let t,n,r,l,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k=e[10](e[2][0].start)+"",z=e[10](e[2][e[2].length-2].start)+"",M=e[2].slice(0,-1).map(Ut).join(" • ")+"",q=e[0].slice(0,-1).map(Yt).join("% • ")+"";return{c(){t=C("tr"),n=C("th"),r=T(k),l=T(" – "),a=T(z),s=T(":"),o=_(),i=C("td"),c=T(M),u=_(),d=C("span"),d.textContent="reviews",p=_(),f=C("tr"),m=C("th"),v=_(),g=C("td"),$=T(q),b=T("% "),x=C("span"),x.textContent="accuracy",S(d,"class","secondary"),S(x,"class","secondary")},m(e,w){y(e,t,w),h(t,n),h(n,r),h(n,l),h(n,a),h(n,s),h(t,o),h(t,i),h(i,c),h(i,u),h(i,d),y(e,p,w),y(e,f,w),h(f,m),h(f,v),h(f,g),h(g,$),h(g,b),h(g,x)},p(e,t){4&t&&k!==(k=e[10](e[2][0].start)+"")&&F(r,k),4&t&&z!==(z=e[10](e[2][e[2].length-2].start)+"")&&F(a,z),4&t&&M!==(M=e[2].slice(0,-1).map(Ut).join(" • ")+"")&&F(c,M),1&t&&q!==(q=e[0].slice(0,-1).map(Yt).join("% • ")+"")&&F($,q)},d(e){e&&w(t),e&&w(p),e&&w(f)}}}function Jt(e){let t,n,r,l;const a=[Nt,Bt],s=[];function o(e,t){return"chart"===e[8]?0:1}return n=o(e),r=s[n]=a[n](e),{c(){t=C("div"),r.c(),S(t,"class","gbWidget"),S(t,"data-testid","reviews-per-day-gauge")},m(e,r){y(e,t,r),s[n].m(t,null),l=!0},p(e,[l]){let i=n;n=o(e),n===i?s[n].p(e,l):(ce(),pe(s[i],1,1,(()=>{s[i]=null})),ue(),r=s[n],r?r.p(e,l):(r=s[n]=a[n](e),r.c()),de(r,1),r.m(t,null))},i(e){l||(de(r),l=!0)},o(e){pe(r),l=!1},d(e){e&&w(t),s[n].d()}}}const Ut=e=>e.review_count,Yt=e=>(100*e).toFixed();function Xt(e,t,n){let r,l,a,s,o,c,u,d,p,f;i(e,kt,(e=>n(2,u=e))),i(e,_t,(e=>n(3,d=e))),i(e,gt,(e=>n(8,p=e))),i(e,yt,(e=>n(9,f=e)));const m=e=>new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(e);return e.$$.update=()=>{4&e.$$.dirty&&n(7,r=u.map((e=>m(e.start)))),4&e.$$.dirty&&n(1,l=u.reduce(((e,t)=>e+t.review_count),0)),10&e.$$.dirty&&n(6,a=(l/d.daysToReview).toFixed()),4&e.$$.dirty&&n(5,s=u.map((e=>e.review_count))),4&e.$$.dirty&&n(0,o=u.map((e=>e.accuracy))),1&e.$$.dirty&&n(4,c=100*o.reduce(((e,t)=>e+t),0)/o.length)},[o,l,u,d,c,s,a,r,p,f,m]}class en extends xe{constructor(e){super(),we(this,e,Xt,Jt,s,{})}}function tn(e){let t,n,r,l,a,s,o,i,u,d;const p=e[4].default,f=function(e,t,n,r){if(e){const l=c(e,t,n,r);return e[0](l)}}(p,e,e[3],null);return{c(){t=C("div"),n=C("div"),r=k("svg"),l=k("circle"),a=k("line"),s=k("line"),o=_(),f&&f.c(),S(l,"cx","6"),S(l,"cy","6"),S(l,"r","6"),S(a,"x1","3"),S(a,"y1","3"),S(a,"x2","9"),S(a,"y2","9"),S(a,"class","svelte-1tenb2r"),S(s,"x1","9"),S(s,"y1","3"),S(s,"x2","3"),S(s,"y2","9"),S(s,"class","svelte-1tenb2r"),S(r,"class","closeIcon svelte-1tenb2r"),S(r,"viewBox","0 0 12 12"),S(n,"class","modal svelte-1tenb2r"),S(t,"class","modal-wrapper svelte-1tenb2r")},m(c,p){y(c,t,p),h(t,n),h(n,r),h(r,l),h(r,a),h(r,s),h(n,o),f&&f.m(n,null),i=!0,u||(d=M(r,"click",e[6]),u=!0)},p(e,t){f&&f.p&&(!i||8&t)&&function(e,t,n,r,l,a){if(l){const s=c(t,n,r,a);e.p(s,l)}}(f,p,e,e[3],i?function(e,t,n,r){if(e[2]&&r){const l=e[2](r(n));if(void 0===t.dirty)return l;if("object"==typeof l){const e=[],n=Math.max(t.dirty.length,l.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|l[r];return e}return t.dirty|l}return t.dirty}(p,e[3],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[3]),null)},i(e){i||(de(f,e),i=!0)},o(e){pe(f,e),i=!1},d(e){e&&w(t),f&&f.d(e),u=!1,d()}}}function nn(e){let t,n,r,l,a=e[1]&&tn(e);return{c(){a&&a.c(),t=z()},m(s,o){a&&a.m(s,o),y(s,t,o),n=!0,r||(l=M(window,"keydown",e[5]),r=!0)},p(e,[n]){e[1]?a?(a.p(e,n),2&n&&de(a,1)):(a=tn(e),a.c(),de(a,1),a.m(t.parentNode,t)):a&&(ce(),pe(a,1,1,(()=>{a=null})),ue())},i(e){n||(de(a),n=!0)},o(e){pe(a),n=!1},d(e){a&&a.d(e),e&&w(t),r=!1,l()}}}function rn(e,t,n){let{$$slots:r={},$$scope:l}=t,a=!1;function s(){n(1,a=!1)}return e.$$set=e=>{"$$scope"in e&&n(3,l=e.$$scope)},[s,a,function(){n(1,a=!0)},l,r,e=>{"Escape"===e.key&&s()},()=>s()]}class ln extends xe{constructor(e){super(),we(this,e,rn,nn,s,{show:2,hide:0})}get show(){return this.$$.ctx[2]}get hide(){return this.$$.ctx[0]}}function an(e){let t,n,r,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k,z,q,R,A,Q,D,O,L,E,I,P,V,Z,H,B,G,K,J,U,Y,ee,te,ne,re,le,ae,se,oe,ie,ce,ue,fe,me,ve,ye,we,xe,Ce,ke,Te,_e,ze,Me,qe,Se,je,Fe,We,Re,Ae,Qe,De,Oe,Le,Ee,Ie,Pe,Ve,Ze,He,Be,Ne,Ge,Ke,Je,Ue,Ye,Xe,et,tt,nt,lt,at,st,ot,it,ct,ut,dt,pt=e[0].gbMinTarget+"",ft=e[0].gbMaxTarget+"";function mt(t){e[2](t)}let vt={id:"gbRange",range:!0,pushy:!0,float:!0,min:1,max:300};return void 0!==e[1]&&(vt.values=e[1]),a=new rt({props:vt}),N.push((()=>ge(a,"values",mt))),{c(){t=C("div"),n=C("h4"),n.textContent="Target range",r=_(),he(a.$$.fragment),o=_(),i=C("div"),c=T(pt),u=T(" – "),d=T(ft),p=_(),f=C("hr"),m=_(),v=C("table"),g=C("tbody"),$=C("tr"),b=C("th"),b.textContent="Labels",x=_(),k=C("td"),z=C("input"),q=_(),R=C("td"),A=C("input"),Q=_(),D=C("td"),O=C("input"),L=_(),E=C("thead"),E.innerHTML='<tr class="svelte-y40aun"><td class="svelte-y40aun"></td> \n        <th class="secondary center col3 svelte-y40aun">Below</th> \n        <th class="secondary center svelte-y40aun">In range</th> \n        <th class="secondary center svelte-y40aun">Above</th></tr>',I=_(),P=C("hr"),V=_(),Z=C("table"),H=C("thead"),H.innerHTML='<tr class="svelte-y40aun"><th></th> \n        <th class="col3 svelte-y40aun">Weight</th> \n        <th></th> \n        <th class="col5 svelte-y40aun">Weight</th></tr>',B=_(),G=C("tbody"),K=C("tr"),J=C("th"),J.textContent="Radical1-2",U=_(),Y=C("td"),ee=C("input"),te=_(),ne=C("th"),ne.textContent="Appr3-4",re=_(),le=C("td"),ae=C("input"),se=_(),oe=C("tr"),ie=C("th"),ie.textContent="Kanji1-2",ce=_(),ue=C("td"),fe=C("input"),me=_(),ve=C("th"),ve.textContent="Guru",ye=_(),we=C("td"),xe=C("input"),Ce=_(),ke=C("tr"),Te=C("th"),Te.textContent="Vocab1-2",_e=_(),ze=C("td"),Me=C("input"),qe=_(),Se=C("th"),Se.textContent="Master",je=_(),Fe=C("td"),We=C("input"),Re=_(),Ae=C("tr"),Qe=C("td"),De=_(),Oe=C("td"),Le=_(),Ee=C("th"),Ee.textContent="Enlightened",Ie=_(),Pe=C("td"),Ve=C("input"),Ze=_(),He=C("hr"),Be=_(),Ne=C("table"),Ge=C("thead"),Ge.innerHTML='<tr class="svelte-y40aun"><td class="svelte-y40aun"></td> \n        <th class="secondary center col3 svelte-y40aun">Radical1-2</th> \n        <th class="secondary center svelte-y40aun">Kanji1-2</th> \n        <th class="secondary center svelte-y40aun">Vocab1-2</th></tr>',Ke=_(),Je=C("tbody"),Ue=C("tr"),Ye=C("th"),Ye.textContent="Quiz?",Xe=_(),et=C("td"),tt=C("input"),nt=_(),lt=C("td"),at=C("input"),st=_(),ot=C("td"),it=C("input"),S(n,"class","svelte-y40aun"),S(i,"class","rangeLabel svelte-y40aun"),S(f,"class","svelte-y40aun"),S(b,"class","col2 svelte-y40aun"),S(z,"type","text"),S(z,"class","svelte-y40aun"),S(k,"class","svelte-y40aun"),S(A,"type","text"),S(A,"class","svelte-y40aun"),S(R,"class","svelte-y40aun"),S(O,"type","text"),S(O,"class","svelte-y40aun"),S(D,"class","svelte-y40aun"),S($,"class","svelte-y40aun"),S(g,"class","svelte-y40aun"),S(E,"class","svelte-y40aun"),S(v,"class","svelte-y40aun"),S(P,"class","svelte-y40aun"),S(H,"class","svelte-y40aun"),S(J,"class","secondary right-align col2 svelte-y40aun"),S(ee,"class","col3 svelte-y40aun"),S(ee,"type","number"),S(ee,"min",0),S(ee,"max",5),S(ee,"step",.1),S(Y,"class","svelte-y40aun"),S(ne,"class","secondary right-align col4 svelte-y40aun"),S(ae,"class","col5 svelte-y40aun"),S(ae,"type","number"),S(ae,"min",0),S(ae,"max",5),S(ae,"step",.1),S(le,"class","svelte-y40aun"),S(K,"class","svelte-y40aun"),S(ie,"class","secondary right-align col2 svelte-y40aun"),S(fe,"class","col3 svelte-y40aun"),S(fe,"type","number"),S(fe,"min",0),S(fe,"max",5),S(fe,"step",.1),S(ue,"class","svelte-y40aun"),S(ve,"class","secondary right-align col4 svelte-y40aun"),S(xe,"class","col5 svelte-y40aun"),S(xe,"type","number"),S(xe,"min",0),S(xe,"max",5),S(xe,"step",.1),S(we,"class","svelte-y40aun"),S(oe,"class","svelte-y40aun"),S(Te,"class","secondary right-align col2 svelte-y40aun"),S(Me,"class","col3 svelte-y40aun"),S(Me,"type","number"),S(Me,"min",0),S(Me,"max",5),S(Me,"step",.1),S(ze,"class","svelte-y40aun"),S(Se,"class","secondary right-align col4 svelte-y40aun"),S(We,"class","col4 svelte-y40aun"),S(We,"type","number"),S(We,"min",0),S(We,"max",5),S(We,"step",.1),S(Fe,"class","svelte-y40aun"),S(ke,"class","svelte-y40aun"),S(Qe,"class","svelte-y40aun"),S(Oe,"class","svelte-y40aun"),S(Ee,"class","secondary right-align col4 svelte-y40aun"),S(Ve,"class","col5 svelte-y40aun"),S(Ve,"type","number"),S(Ve,"min",0),S(Ve,"max",5),S(Ve,"step",.1),S(Pe,"class","svelte-y40aun"),S(Ae,"class","svelte-y40aun"),S(G,"class","svelte-y40aun"),S(Z,"class","svelte-y40aun"),S(He,"class","svelte-y40aun"),S(Ge,"class","svelte-y40aun"),S(Ye,"class","col2 svelte-y40aun"),S(tt,"type","checkbox"),S(tt,"name","quizTypes"),S(et,"class","svelte-y40aun"),S(at,"type","checkbox"),S(at,"name","quizTypes"),S(lt,"class","svelte-y40aun"),S(it,"type","checkbox"),S(it,"name","quizTypes"),S(ot,"class","svelte-y40aun"),S(Ue,"class","svelte-y40aun"),S(Je,"class","svelte-y40aun"),S(Ne,"class","svelte-y40aun"),S(t,"class","gbSettingsComp")},m(l,s){y(l,t,s),h(t,n),h(t,r),$e(a,t,null),h(t,o),h(t,i),h(i,c),h(i,u),h(i,d),h(t,p),h(t,f),h(t,m),h(t,v),h(v,g),h(g,$),h($,b),h($,x),h($,k),h(k,z),W(z,e[0].belowTerm),h($,q),h($,R),h(R,A),W(A,e[0].inRangeTerm),h($,Q),h($,D),h(D,O),W(O,e[0].aboveTerm),h(v,L),h(v,E),h(t,I),h(t,P),h(t,V),h(t,Z),h(Z,H),h(Z,B),h(Z,G),h(G,K),h(K,J),h(K,U),h(K,Y),h(Y,ee),W(ee,e[0].newRWeight),h(K,te),h(K,ne),h(K,re),h(K,le),h(le,ae),W(ae,e[0].apprWeight),h(G,se),h(G,oe),h(oe,ie),h(oe,ce),h(oe,ue),h(ue,fe),W(fe,e[0].newKWeight),h(oe,me),h(oe,ve),h(oe,ye),h(oe,we),h(we,xe),W(xe,e[0].guruWeight),h(G,Ce),h(G,ke),h(ke,Te),h(ke,_e),h(ke,ze),h(ze,Me),W(Me,e[0].newVWeight),h(ke,qe),h(ke,Se),h(ke,je),h(ke,Fe),h(Fe,We),W(We,e[0].masterWeight),h(G,Re),h(G,Ae),h(Ae,Qe),h(Ae,De),h(Ae,Oe),h(Ae,Le),h(Ae,Ee),h(Ae,Ie),h(Ae,Pe),h(Pe,Ve),W(Ve,e[0].enlightenedWeight),h(t,Ze),h(t,He),h(t,Be),h(t,Ne),h(Ne,Ge),h(Ne,Ke),h(Ne,Je),h(Je,Ue),h(Ue,Ye),h(Ue,Xe),h(Ue,et),h(et,tt),tt.checked=e[0].rQuiz,h(Ue,nt),h(Ue,lt),h(lt,at),at.checked=e[0].kQuiz,h(Ue,st),h(Ue,ot),h(ot,it),it.checked=e[0].vQuiz,ct=!0,ut||(dt=[M(z,"input",e[3]),M(A,"input",e[4]),M(O,"input",e[5]),M(ee,"input",e[6]),M(ae,"input",e[7]),M(fe,"input",e[8]),M(xe,"input",e[9]),M(Me,"input",e[10]),M(We,"input",e[11]),M(Ve,"input",e[12]),M(tt,"change",e[13]),M(at,"change",e[14]),M(it,"change",e[15])],ut=!0)},p(e,[t]){const n={};!s&&2&t&&(s=!0,n.values=e[1],X((()=>s=!1))),a.$set(n),(!ct||1&t)&&pt!==(pt=e[0].gbMinTarget+"")&&F(c,pt),(!ct||1&t)&&ft!==(ft=e[0].gbMaxTarget+"")&&F(d,ft),1&t&&z.value!==e[0].belowTerm&&W(z,e[0].belowTerm),1&t&&A.value!==e[0].inRangeTerm&&W(A,e[0].inRangeTerm),1&t&&O.value!==e[0].aboveTerm&&W(O,e[0].aboveTerm),1&t&&j(ee.value)!==e[0].newRWeight&&W(ee,e[0].newRWeight),1&t&&j(ae.value)!==e[0].apprWeight&&W(ae,e[0].apprWeight),1&t&&j(fe.value)!==e[0].newKWeight&&W(fe,e[0].newKWeight),1&t&&j(xe.value)!==e[0].guruWeight&&W(xe,e[0].guruWeight),1&t&&j(Me.value)!==e[0].newVWeight&&W(Me,e[0].newVWeight),1&t&&j(We.value)!==e[0].masterWeight&&W(We,e[0].masterWeight),1&t&&j(Ve.value)!==e[0].enlightenedWeight&&W(Ve,e[0].enlightenedWeight),1&t&&(tt.checked=e[0].rQuiz),1&t&&(at.checked=e[0].kQuiz),1&t&&(it.checked=e[0].vQuiz)},i(e){ct||(de(a.$$.fragment,e),ct=!0)},o(e){pe(a.$$.fragment,e),ct=!1},d(e){e&&w(t),be(a),ut=!1,l(dt)}}}function sn(e,t,n){let{values:r}=t,l=[r.gbMinTarget,r.gbMaxTarget];return e.$$set=e=>{"values"in e&&n(0,r=e.values)},e.$$.update=()=>{2&e.$$.dirty&&n(0,[r.gbMinTarget,r.gbMaxTarget]=l,r)},[r,l,function(e){l=e,n(1,l)},function(){r.belowTerm=this.value,n(0,r),n(1,l)},function(){r.inRangeTerm=this.value,n(0,r),n(1,l)},function(){r.aboveTerm=this.value,n(0,r),n(1,l)},function(){r.newRWeight=j(this.value),n(0,r),n(1,l)},function(){r.apprWeight=j(this.value),n(0,r),n(1,l)},function(){r.newKWeight=j(this.value),n(0,r),n(1,l)},function(){r.guruWeight=j(this.value),n(0,r),n(1,l)},function(){r.newVWeight=j(this.value),n(0,r),n(1,l)},function(){r.masterWeight=j(this.value),n(0,r),n(1,l)},function(){r.enlightenedWeight=j(this.value),n(0,r),n(1,l)},function(){r.rQuiz=this.checked,n(0,r),n(1,l)},function(){r.kQuiz=this.checked,n(0,r),n(1,l)},function(){r.vQuiz=this.checked,n(0,r),n(1,l)}]}class on extends xe{constructor(e){super(),we(this,e,sn,an,s,{values:0})}}function cn(e){let t,n,r,l,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k,z,M,q,j,W,R,A,Q,D,O,L,E,I,P,V,Z,H,B,G=e[0].daysToReview+"",K=e[0].daysToReview>1?"s":"",J=e[0].minQPM+"",U=e[0].maxQPM+"",Y=e[0].rpdMin+"",ee=e[0].rpdMax+"";function te(t){e[4](t)}let ne={id:"daysToRetrieve",float:!0,min:1,max:7};function re(t){e[5](t)}void 0!==e[3]&&(ne.values=e[3]),l=new rt({props:ne}),N.push((()=>ge(l,"values",te)));let le={id:"speedRange",range:!0,pushy:!0,float:!0,min:1,max:30};function ae(t){e[6](t)}void 0!==e[2]&&(le.values=e[2]),$=new rt({props:le}),N.push((()=>ge($,"values",re)));let se={id:"rpdRange",range:!0,pushy:!0,float:!0,min:1,max:300};return void 0!==e[1]&&(se.values=e[1]),O=new rt({props:se}),N.push((()=>ge(O,"values",ae))),{c(){t=C("div"),n=C("h4"),n.textContent="Reviews to examine",r=_(),he(l.$$.fragment),s=_(),o=C("div"),i=T("past "),c=T(G),u=T(" day"),d=T(K),p=_(),f=C("hr"),m=_(),v=C("h4"),v.textContent="Target answer speed",g=_(),he($.$$.fragment),x=_(),k=C("div"),z=T(J),M=T(" – "),q=T(U),j=T(" questions/minute"),W=_(),R=C("hr"),A=_(),Q=C("h4"),Q.textContent="Target daily load",D=_(),he(O.$$.fragment),E=_(),I=C("div"),P=T(Y),V=T(" – "),Z=T(ee),H=T(" reviews/day"),S(n,"class","svelte-15uqope"),S(o,"class","rangeLabel svelte-15uqope"),S(f,"class","svelte-15uqope"),S(v,"class","svelte-15uqope"),S(k,"class","rangeLabel svelte-15uqope"),S(R,"class","svelte-15uqope"),S(Q,"class","svelte-15uqope"),S(I,"class","rangeLabel svelte-15uqope"),S(t,"class","gbSettingsComp")},m(e,a){y(e,t,a),h(t,n),h(t,r),$e(l,t,null),h(t,s),h(t,o),h(o,i),h(o,c),h(o,u),h(o,d),h(t,p),h(t,f),h(t,m),h(t,v),h(t,g),$e($,t,null),h(t,x),h(t,k),h(k,z),h(k,M),h(k,q),h(k,j),h(t,W),h(t,R),h(t,A),h(t,Q),h(t,D),$e(O,t,null),h(t,E),h(t,I),h(I,P),h(I,V),h(I,Z),h(I,H),B=!0},p(e,[t]){const n={};!a&&8&t&&(a=!0,n.values=e[3],X((()=>a=!1))),l.$set(n),(!B||1&t)&&G!==(G=e[0].daysToReview+"")&&F(c,G),(!B||1&t)&&K!==(K=e[0].daysToReview>1?"s":"")&&F(d,K);const r={};!b&&4&t&&(b=!0,r.values=e[2],X((()=>b=!1))),$.$set(r),(!B||1&t)&&J!==(J=e[0].minQPM+"")&&F(z,J),(!B||1&t)&&U!==(U=e[0].maxQPM+"")&&F(q,U);const s={};!L&&2&t&&(L=!0,s.values=e[1],X((()=>L=!1))),O.$set(s),(!B||1&t)&&Y!==(Y=e[0].rpdMin+"")&&F(P,Y),(!B||1&t)&&ee!==(ee=e[0].rpdMax+"")&&F(Z,ee)},i(e){B||(de(l.$$.fragment,e),de($.$$.fragment,e),de(O.$$.fragment,e),B=!0)},o(e){pe(l.$$.fragment,e),pe($.$$.fragment,e),pe(O.$$.fragment,e),B=!1},d(e){e&&w(t),be(l),be($),be(O)}}}function un(e,t,n){let{values:r}=t,l=[r.rpdMin,r.rpdMax],a=[r.minQPM,r.maxQPM],s=[r.daysToReview];return e.$$set=e=>{"values"in e&&n(0,r=e.values)},e.$$.update=()=>{14&e.$$.dirty&&n(0,[r.daysToReview,r.rpdMin,r.rpdMax,r.minQPM,r.maxQPM]=[...s,...l,...a],r)},[r,l,a,s,function(e){s=e,n(3,s)},function(e){a=e,n(2,a)},function(e){l=e,n(1,l)}]}class dn extends xe{constructor(e){super(),we(this,e,un,cn,s,{values:0})}}function pn(e){let t,n,r,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k,z,j,F,R,Q,D,O,L,E,I,P,V,Z,H,B,N,G,K,J,U,X,ee,te,ne,re,le,ae,se,oe,ie,ce,ue,fe,me,ve,ge,ye,we,xe,Ce;return s=new dt({props:{value:.4,label:"Sample",needle:!0,lowZone:!0,hiZone:!0}}),i=new Ht({props:{values:[7,10,8],labels:["Mon","Tue","Wed"],expected:7,minTarget:2,maxTarget:9,percents:[.66,.8,.75]}}),{c(){t=C("div"),n=C("div"),r=C("div"),r.textContent="Warning Color",a=_(),he(s.$$.fragment),o=_(),he(i.$$.fragment),u=_(),d=C("button"),d.textContent="Light theme",p=_(),f=C("button"),f.textContent="Dark Theme",m=_(),v=C("h3"),v.textContent="Individual overrides",g=_(),$=C("div"),b=C("label"),x=T("Bgnd\n      "),k=C("input"),z=_(),j=C("label"),F=T("Track\n    "),R=C("input"),Q=_(),D=C("label"),O=T("Text\n      "),L=C("input"),E=_(),I=C("label"),P=T("hlText\n      "),V=C("input"),Z=_(),H=C("div"),B=C("label"),N=T("Fill\n      "),G=C("input"),K=_(),J=C("label"),U=T("Warn\n      "),X=C("input"),ee=_(),te=C("label"),ne=T("hlTrack\n      "),re=C("input"),le=_(),ae=C("hr"),se=_(),oe=C("div"),ie=C("label"),ie.textContent="Position",ce=_(),ue=C("select"),fe=C("option"),fe.textContent="Top",me=C("option"),me.textContent="Below Forecast",ve=C("option"),ve.textContent="Below SRS",ge=C("option"),ge.textContent="Below Panels",ye=C("option"),ye.textContent="Bottom",S(r,"class","warnBox svelte-17we3vo"),S(n,"class","colorSample svelte-17we3vo"),S(n,"style",c=` \n      background-color: ${e[0].bgColor};\n      --bgColor: ${e[0].bgColor}; \n      --trackColor: ${e[0].hlTrackColor}; \n      --textColor: ${e[0].textColor}; \n      --hlTextColor: ${e[0].hlTextColor}; \n      --fillColor: ${e[0].fillColor}; \n      --warnColor: ${e[0].warnColor}; \n      --hlTrackColor: ${e[0].trackColor};`),S(d,"class","light svelte-17we3vo"),S(f,"class","dark svelte-17we3vo"),S(v,"class","svelte-17we3vo"),S(k,"type","color"),S(k,"class","svelte-17we3vo"),S(b,"class","svelte-17we3vo"),S(R,"type","color"),S(R,"class","svelte-17we3vo"),S(j,"class","svelte-17we3vo"),S(L,"type","color"),S(L,"class","svelte-17we3vo"),S(D,"class","svelte-17we3vo"),S(V,"type","color"),S(V,"class","svelte-17we3vo"),S(I,"class","svelte-17we3vo"),S($,"class","colorInputs svelte-17we3vo"),S(G,"type","color"),S(G,"class","svelte-17we3vo"),S(B,"class","svelte-17we3vo"),S(X,"type","color"),S(X,"class","svelte-17we3vo"),S(J,"class","svelte-17we3vo"),S(re,"type","color"),S(re,"class","svelte-17we3vo"),S(te,"class","svelte-17we3vo"),S(H,"class","colorInputs svelte-17we3vo"),S(ae,"class","svelte-17we3vo"),S(ie,"for","position-select"),S(ie,"class","svelte-17we3vo"),fe.__value="Top",fe.value=fe.__value,me.__value="Below Forecast",me.value=me.__value,ve.__value="Below SRS",ve.value=ve.__value,ge.__value="Below Panels",ge.value=ge.__value,ye.__value="Bottom",ye.value=ye.__value,S(ue,"name","positions"),S(ue,"id","position-select"),S(ue,"class","svelte-17we3vo"),void 0===e[0].position&&Y((()=>e[10].call(ue))),S(oe,"class","position svelte-17we3vo"),S(t,"class","gbSettingsComp")},m(l,c){y(l,t,c),h(t,n),h(n,r),h(n,a),$e(s,n,null),h(n,o),$e(i,n,null),h(t,u),h(t,d),h(t,p),h(t,f),h(t,m),h(t,v),h(t,g),h(t,$),h($,b),h(b,x),h(b,k),W(k,e[0].bgColor),h($,z),h($,j),h(j,F),h(j,R),W(R,e[0].trackColor),h($,Q),h($,D),h(D,O),h(D,L),W(L,e[0].textColor),h($,E),h($,I),h(I,P),h(I,V),W(V,e[0].hlTextColor),h(t,Z),h(t,H),h(H,B),h(B,N),h(B,G),W(G,e[0].fillColor),h(H,K),h(H,J),h(J,U),h(J,X),W(X,e[0].warnColor),h(H,ee),h(H,te),h(te,ne),h(te,re),W(re,e[0].hlTrackColor),h(t,le),h(t,ae),h(t,se),h(t,oe),h(oe,ie),h(oe,ce),h(oe,ue),h(ue,fe),h(ue,me),h(ue,ve),h(ue,ge),h(ue,ye),A(ue,e[0].position),we=!0,xe||(Ce=[M(d,"click",q(e[1])),M(f,"click",q(e[2])),M(k,"input",e[3]),M(R,"input",e[4]),M(L,"input",e[5]),M(V,"input",e[6]),M(G,"input",e[7]),M(X,"input",e[8]),M(re,"input",e[9]),M(ue,"change",e[10])],xe=!0)},p(e,[t]){(!we||1&t&&c!==(c=` \n      background-color: ${e[0].bgColor};\n      --bgColor: ${e[0].bgColor}; \n      --trackColor: ${e[0].hlTrackColor}; \n      --textColor: ${e[0].textColor}; \n      --hlTextColor: ${e[0].hlTextColor}; \n      --fillColor: ${e[0].fillColor}; \n      --warnColor: ${e[0].warnColor}; \n      --hlTrackColor: ${e[0].trackColor};`))&&S(n,"style",c),1&t&&W(k,e[0].bgColor),1&t&&W(R,e[0].trackColor),1&t&&W(L,e[0].textColor),1&t&&W(V,e[0].hlTextColor),1&t&&W(G,e[0].fillColor),1&t&&W(X,e[0].warnColor),1&t&&W(re,e[0].hlTrackColor),1&t&&A(ue,e[0].position)},i(e){we||(de(s.$$.fragment,e),de(i.$$.fragment,e),we=!0)},o(e){pe(s.$$.fragment,e),pe(i.$$.fragment,e),we=!1},d(e){e&&w(t),be(s),be(i),xe=!1,l(Ce)}}}function fn(e,t,n){let{values:r}=t;return e.$$set=e=>{"values"in e&&n(0,r=e.values)},[r,()=>{n(0,r.bgColor="#f4f4f4",r),n(0,r.hlTrackColor="#d1e8d4",r),n(0,r.trackColor="#e0e0e0",r),n(0,r.textColor="#333333",r),n(0,r.hlTextColor="#fbb623",r),n(0,r.fillColor="#59c273",r),n(0,r.warnColor="#fbb623",r)},()=>{n(0,r.bgColor="#232629",r),n(0,r.trackColor="#e0e0e0",r),n(0,r.textColor="#bcbcbc",r),n(0,r.hlTextColor="#fcbd4b",r),n(0,r.fillColor="#59c273",r),n(0,r.warnColor="#fcbd4b",r),n(0,r.hlTrackColor="#aad4b0",r)},function(){r.bgColor=this.value,n(0,r)},function(){r.trackColor=this.value,n(0,r)},function(){r.textColor=this.value,n(0,r)},function(){r.hlTextColor=this.value,n(0,r)},function(){r.fillColor=this.value,n(0,r)},function(){r.warnColor=this.value,n(0,r)},function(){r.hlTrackColor=this.value,n(0,r)},function(){r.position=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,r)}]}class mn extends xe{constructor(e){super(),we(this,e,fn,pn,s,{values:0})}}function vn(e){let t,n,r,l,a,s,o,i,c,u=e[0].madCutoff+"";function d(t){e[2](t)}let p={id:"madRange",float:!0,min:1,max:15};return void 0!==e[1]&&(p.values=e[1]),l=new rt({props:p}),N.push((()=>ge(l,"values",d))),{c(){t=C("div"),n=C("h4"),n.textContent="MAD cutoff",r=_(),he(l.$$.fragment),s=_(),o=C("div"),i=T(u),S(n,"class","svelte-1tt0pz6"),S(o,"class","rangeLabel svelte-1tt0pz6"),S(t,"class","gbSettingsComp")},m(e,a){y(e,t,a),h(t,n),h(t,r),$e(l,t,null),h(t,s),h(t,o),h(o,i),c=!0},p(e,[t]){const n={};!a&&2&t&&(a=!0,n.values=e[1],X((()=>a=!1))),l.$set(n),(!c||1&t)&&u!==(u=e[0].madCutoff+"")&&F(i,u)},i(e){c||(de(l.$$.fragment,e),c=!0)},o(e){pe(l.$$.fragment,e),c=!1},d(e){e&&w(t),be(l)}}}function gn(e,t,n){let{values:r}=t,l=[r.madCutoff];return e.$$set=e=>{"values"in e&&n(0,r=e.values)},e.$$.update=()=>{2&e.$$.dirty&&n(0,[r.madCutoff]=l,r)},[r,l,function(e){l=e,n(1,l)}]}class hn extends xe{constructor(e){super(),we(this,e,gn,vn,s,{values:0})}}function $n(e){let t,n;return t=new hn({props:{values:e[0]}}),{c(){he(t.$$.fragment)},m(e,r){$e(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.values=e[0]),t.$set(r)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function bn(e){let t,n;return t=new mn({props:{values:e[0]}}),{c(){he(t.$$.fragment)},m(e,r){$e(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.values=e[0]),t.$set(r)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function yn(e){let t,n;return t=new dn({props:{values:e[0]}}),{c(){he(t.$$.fragment)},m(e,r){$e(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.values=e[0]),t.$set(r)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function wn(e){let t,n;return t=new on({props:{values:e[0]}}),{c(){he(t.$$.fragment)},m(e,r){$e(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.values=e[0]),t.$set(r)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function xn(e){let t,n,r,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k,T,z,j,F,W;const R=[wn,yn,bn,$n],A=[];function D(e,t){return"Ganbarometer"===e[1]?0:"Reviews"===e[1]?1:"Appearance"===e[1]?2:"Advanced"===e[1]?3:-1}return~(T=D(e))&&(z=A[T]=R[T](e)),{c(){t=C("form"),n=C("h1"),n.textContent="Ganbarometer Settings",r=_(),a=C("div"),s=C("nav"),o=C("li"),o.textContent="Ganbarometer",i=_(),c=C("li"),c.textContent="Speed/Reviews",u=_(),d=C("li"),d.textContent="Appearance",p=_(),f=C("li"),f.textContent="Advanced",m=_(),v=C("div"),g=C("button"),g.textContent="Defaults",$=_(),b=C("button"),b.textContent="Save",x=_(),k=C("div"),z&&z.c(),S(n,"class","title svelte-ozjc65"),S(o,"class","svelte-ozjc65"),Q(o,"active","Ganbarometer"===e[1]),S(c,"class","svelte-ozjc65"),Q(c,"active","Reviews"===e[1]),S(d,"class","svelte-ozjc65"),Q(d,"active","Appearance"===e[1]),S(f,"class","svelte-ozjc65"),Q(f,"active","Advanced"===e[1]),S(s,"class","nav svelte-ozjc65"),S(g,"class","defaultButton svelte-ozjc65"),S(b,"type","submit"),S(b,"class","svelte-ozjc65"),S(v,"class","actions"),S(a,"class","menu svelte-ozjc65"),S(k,"class","formInputs svelte-ozjc65"),S(t,"aria-label","Settings Form"),S(t,"class","settingsForm svelte-ozjc65")},m(l,w){y(l,t,w),h(t,n),h(t,r),h(t,a),h(a,s),h(s,o),h(s,i),h(s,c),h(s,u),h(s,d),h(s,p),h(s,f),h(a,m),h(a,v),h(v,g),h(v,$),h(v,b),h(t,x),h(t,k),~T&&A[T].m(k,null),j=!0,F||(W=[M(o,"click",e[4]("Ganbarometer")),M(c,"click",e[4]("Reviews")),M(d,"click",e[4]("Appearance")),M(f,"click",e[4]("Advanced")),M(g,"click",q(e[3])),M(t,"submit",q(e[2]))],F=!0)},p(e,[t]){2&t&&Q(o,"active","Ganbarometer"===e[1]),2&t&&Q(c,"active","Reviews"===e[1]),2&t&&Q(d,"active","Appearance"===e[1]),2&t&&Q(f,"active","Advanced"===e[1]);let n=T;T=D(e),T===n?~T&&A[T].p(e,t):(z&&(ce(),pe(A[n],1,1,(()=>{A[n]=null})),ue()),~T?(z=A[T],z?z.p(e,t):(z=A[T]=R[T](e),z.c()),de(z,1),z.m(k,null)):z=null)},i(e){j||(de(z),j=!0)},o(e){pe(z),j=!1},d(e){e&&w(t),~T&&A[T].d(),F=!1,l(W)}}}function Cn(e,t,n){let r;i(e,_t,(e=>n(6,r=e)));let{modal:l}=t,a=Object.assign({},r);let s="Ganbarometer";return e.$$set=e=>{"modal"in e&&n(5,l=e.modal)},[a,s,()=>{u(_t,r=Object.assign(Object.assign({},r),a),r),l.hide()},()=>{n(0,a=Object.assign({},Tt))},e=>()=>n(1,s=e),l]}class kn extends xe{constructor(e){super(),we(this,e,Cn,xn,s,{modal:5})}}function Tn(t){let n,r,l;return{c(){n=C("button"),n.innerHTML='<svg id="b76ee484-33fd-42f4-92f5-780eb817404e" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 344.6 297.7"><path d="M200.9,314.2l-43.7,27.5a15.4,15.4,0,0,1-21.2-4.8L31,169.9a15.4,15.4,0,0,1,4.8-21.2l57.1-35.9L144,80.7" transform="translate(-23.6 -51.3)" style="fill: none;stroke: var(--textColor);stroke-linecap: round;stroke-linejoin: round;stroke-width: 10px"></path><path d="M197.2,286.8,147.9,284a15.4,15.4,0,0,1-14.5-16.2l9.9-170.3.9-16.3.6-10.4a15.4,15.4,0,0,1,16.3-14.4l132,7.6a15.4,15.4,0,0,1,14.5,16.2l-.6,10" transform="translate(-23.6 -51.3)" style="fill: none;stroke: var(--textColor);stroke-linecap: round;stroke-linejoin: round;stroke-width: 10px"></path><path d="M200.9,314.2l.7,5.1a15.3,15.3,0,0,0,17.3,13.1L350,314.5a15.3,15.3,0,0,0,13.1-17.3L336.4,101.7a15.3,15.3,0,0,0-17.3-13.1L307,90.2,188,106.5a15.3,15.3,0,0,0-13.1,17.3l22.3,163Z" transform="translate(-23.6 -51.3)" style="fill: none;stroke: var(--textColor);stroke-linecap: round;stroke-linejoin: round;stroke-width: 10px"></path><path style="fill: var(--textColor); stroke: none;stroke-linecap: round;stroke-linejoin: round;stroke-width: 10px" d="M306.6,155.8c7.9-1.8,12.3.4,14.1,7.8l3.8,16.2c.6,2.5-.8,4.5-4.2,5.2s-5.3-.3-5.9-2.8L311,167.9c-.7-3.1-2.1-3.5-5.1-2.7l-90.6,21.4c-2.8.6-4,1.6-3.3,4.7l3.4,14.3c.6,2.5-1.1,4.5-4.1,5.2s-5.4-.3-5.9-2.8l-3.9-16.3c-1.7-7.3,1.1-11.3,9.1-13.2l14.6-3.5a151.7,151.7,0,0,0-11.7-10.7,3.8,3.8,0,0,1-1.3-1.9c-.4-1.5.4-3.2,2.2-4.3a10,10,0,0,1,2.5-1,5.2,5.2,0,0,1,4.6.8,144.6,144.6,0,0,1,14.9,14.5l19.7-4.7a110.2,110.2,0,0,0-10.9-12.4,3.6,3.6,0,0,1-1.2-1.7c-.4-1.7.6-3.4,2.6-4.6l2.1-.9a5,5,0,0,1,5,1.6,87.1,87.1,0,0,1,12.9,15.6l14.6-3.5a80.5,80.5,0,0,0,6.4-19.3,4.7,4.7,0,0,1,3.6-3.6,8.6,8.6,0,0,1,2.8-.1c2.5.2,3.9,1.3,4.3,3a2.8,2.8,0,0,1-.1,2,71.7,71.7,0,0,1-5.8,15.4Zm-60.2,94.6c-7.4,1.8-11.6-.4-13.2-7.3l-9.1-38.5c-1.7-7.2,1.2-10.8,9.2-12.7L292,178c8-1.9,12.3.1,14,7.2l9.1,38.5c1.6,6.9-1.1,10.7-8.6,12.5l-12.7,3,4,16.7c.7,3,2.1,3.9,4.2,3.7s6.5-1,13.1-2.6,9.9-2.3,12.1-3.5a6,6,0,0,0,3.7-4.1c.5-2.2.2-6-.6-11.4-.5-2.3.7-4.2,3.6-4.9l1.1-.3c3.4-.5,5.3,1.1,6,3.7v.3c1,6.2,1.2,13.7,0,17s-4,5.9-8,7.7-7.9,2.9-16.1,4.9-15.1,3.4-18.6,3.5c-5.1,0-8.9-2.1-10.4-8.3l-4.7-19.9-17.5,4.2c.3,19.7-14,33.8-37.1,43.2a3.1,3.1,0,0,1-1.2.5,5.2,5.2,0,0,1-6.4-3.2,3.5,3.5,0,0,1-.5-1.3c-.6-2.6.7-4.7,3.2-5.7,20-7.7,30.7-17.5,31.1-31Zm51.5-56.1-1.3-5.8c-.6-2.5-2-2.9-4.5-2.3l-55.2,13c-2.5.6-3.5,1.6-3,4.1l1.4,5.8Zm3.9,16.5-2.1-8.9-62.6,14.8,2.1,8.9ZM241,233.2l1.6,6.6c.6,2.5,2,2.9,4.5,2.3l55.1-13c2.5-.6,3.6-1.6,3-4.1l-1.6-6.6Z" transform="translate(-23.6 -51.3)"></path></svg>',S(n,"class","quiz-button svelte-o42zy6")},m(e,a){y(e,n,a),r||(l=M(n,"click",t[0]),r=!0)},p:e,i:e,o:e,d(e){e&&w(n),r=!1,l()}}}function _n(e){return[function(t){H.call(this,e,t)}]}class zn extends xe{constructor(e){super(),we(this,e,_n,Tn,s,{})}}function Mn(t){let n,r,l;return{c(){n=C("button"),n.innerHTML='<svg id="edd52277-873a-4c78-9f5a-11032a27aff1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 297 292"><path d="M163.5,98h180m-287,0h30m226,102h31m-287,0h179m-72,102h180m-287,0h30m77-204.5A38.5,38.5,0,1,0,125,136,38.5,38.5,0,0,0,163.5,97.5ZM125,264a38.5,38.5,0,1,0,38.5,38.5A38.5,38.5,0,0,0,125,264ZM274,161a38.5,38.5,0,1,0,38.5,38.5A38.5,38.5,0,0,0,274,161Z" transform="translate(-51.5 -54)" style="fill: none;stroke: var(--textColor);stroke-linecap: round;stroke-linejoin: round;stroke-width: 10px"></path></svg>',S(n,"aria-label","settings"),S(n,"class","settings svelte-1jfd1ka")},m(e,a){y(e,n,a),r||(l=M(n,"click",t[0]),r=!0)},p:e,i:e,o:e,d(e){e&&w(n),r=!1,l()}}}function qn(e){return[function(t){H.call(this,e,t)}]}class Sn extends xe{constructor(e){super(),we(this,e,qn,Mn,s,{})}}const jn=(e,t)=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear(),Fn=e=>{if(0===e.length)return 0;const t=e.slice().sort(((e,t)=>e-t)),n=Math.floor(t.length/2);return t.length%2?t[n]:(t[n-1]+t[n])/2},Wn=e=>{if(0===e.length)return[];const t=(e=>{const t=e.map((e=>e.duration)),n=Math.min(...t);if(Math.max(...t),n>6e5)return t.map(((e,t)=>t));{const n=Fn(t),r=e.map((e=>Math.abs(e.duration-n))),l=1.4826,a=Fn(r)*l,s=r.map((e=>a>0?Math.abs(e-n)/a:Math.abs(e-n)/n)),o=10,i=s[s.length-1]>o?s:[...s.slice(0,-1),999999];return e.map(((e,t)=>t)).filter(((e,t)=>i[t]>o))}})(e),n=[0,...t.map((e=>e+1))].slice(0,-1);return t.map(((t,r)=>({reviews:e.slice(n[r],t+1)}))).map((e=>({questions:e.reviews.reduce(((e,t)=>e+t.questions),0),reading_incorrect:e.reviews.reduce(((e,t)=>e+t.reading_incorrect),0),meaning_incorrect:e.reviews.reduce(((e,t)=>e+t.meaning_incorrect),0),startTime:e.reviews[0].started,endTime:e.reviews[e.reviews.length-1].started,reviews:e.reviews})))};let Rn;const An=async e=>{if(!Rn||!Rn[e]){wkof.include("ItemData"),await wkof.ready("ItemData");let e=await wkof.ItemData.get_items();Rn=await wkof.ItemData.get_index(e,"subject_id")}return Rn[e]},Qn=e=>({subject_id:e.data.subject_id,started:new Date(e.data.created_at),duration:0,reading_incorrect:+e.data.incorrect_reading_answers,meaning_incorrect:+e.data.incorrect_meaning_answers,questions:0}),Dn=(e,t,n)=>{if(n[t+1]){const r=n[t+1].started.getTime(),l=e.started.getTime();if(r<l)throw"Reviews not in sequential creation order!";return Object.assign(Object.assign({},e),{duration:r-l})}return e},On=(e,t)=>{var n,r;return new Date(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.created_at).getTime()-new Date(null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.created_at).getTime()},Ln=async e=>{if(!(null==e?void 0:e.length))return[];const t=e.map(Qn).map(Dn),n=await(async e=>{let t=e.slice();for(let e of t){const t=await An(+e.subject_id);e.questions="radical"===t.object?1:2,e.questions+=e.meaning_incorrect+e.reading_incorrect}return t})(t);let r=n.slice(0,-1).map((e=>e.duration)),l=Fn(r);return n.length&&(n[n.length-1].duration=l),n},En=async e=>{const t=((e=0)=>{const t=new Date;let n,r=t.getTime()-3600*t.getHours()*1e3-60*t.getMinutes()*1e3-1e3*t.getSeconds()-t.getMilliseconds();return n=e>1?new Date(r-24*(e-1)*3600*1e3):new Date(r),n})(e);wkof.include("Apiv2"),await wkof.ready("Apiv2");const n=await wkof.Apiv2.fetch_endpoint("reviews",{last_update:t.toISOString()}),r=null==n?void 0:n.data.filter((e=>{var n;return new Date(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.created_at).getTime()>=t.getTime()})).sort(On);return Ln(r)},In=/[a-zA-Z]/,Pn=(e,t=0)=>[...Array(e).keys()].map((e=>e+t));function Vn(e,t,n){const r=e.slice();return r[6]=t[n],r}function Zn(e){let t;return{c(){t=C("div"),S(t,"class","dot svelte-14w6xk7"),R(t,"--dotSize",.25*+e[3]+e[1]),R(t,"--color",e[0]),R(t,"animation-delay",e[6]*(+e[5]/10)+e[4])},m(e,n){y(e,t,n)},p(e,n){10&n&&R(t,"--dotSize",.25*+e[3]+e[1]),1&n&&R(t,"--color",e[0])},d(e){e&&w(t)}}}function Hn(t){let n,r=Pn(3,1),l=[];for(let e=0;e<r.length;e+=1)l[e]=Zn(Vn(t,r,e));return{c(){n=C("div");for(let e=0;e<l.length;e+=1)l[e].c();S(n,"class","wrapper svelte-14w6xk7"),R(n,"--size",t[3]+t[1]),R(n,"--duration",t[2])},m(e,t){y(e,n,t);for(let e=0;e<l.length;e+=1)l[e].m(n,null)},p(e,[t]){if(59&t){let a;for(r=Pn(3,1),a=0;a<r.length;a+=1){const s=Vn(e,r,a);l[a]?l[a].p(s,t):(l[a]=Zn(s),l[a].c(),l[a].m(n,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=r.length}10&t&&R(n,"--size",e[3]+e[1]),4&t&&R(n,"--duration",e[2])},i:e,o:e,d(e){e&&w(n),x(l,e)}}}function Bn(e,t,n){let{color:r="#FF3E00"}=t,{unit:l="px"}=t,{duration:a="0.6s"}=t,{size:s="60"}=t,o=a.match(In)[0],i=a.replace(In,"");return e.$$set=e=>{"color"in e&&n(0,r=e.color),"unit"in e&&n(1,l=e.unit),"duration"in e&&n(2,a=e.duration),"size"in e&&n(3,s=e.size)},[r,l,a,s,o,i]}class Nn extends xe{constructor(e){super(),we(this,e,Bn,Hn,s,{color:0,unit:1,duration:2,size:3})}}function Gn(e){let t,n,r,l;return n=new Nn({props:{color:e[0].warnColor,size:"25",unit:"px"}}),{c(){t=C("div"),he(n.$$.fragment),S(t,"class","spinner svelte-1k20jgw")},m(e,r){y(e,t,r),$e(n,t,null),l=!0},p(e,t){const r={};1&t&&(r.color=e[0].warnColor),n.$set(r)},i(e){l||(de(n.$$.fragment,e),Y((()=>{r||(r=ve(t,pt,{},!0)),r.run(1)})),l=!0)},o(e){pe(n.$$.fragment,e),r||(r=ve(t,pt,{},!1)),r.run(0),l=!1},d(e){e&&w(t),be(n),e&&r&&r.end()}}}function Kn(t){let n,r;return n=new zn({}),n.$on("click",t[4]),{c(){he(n.$$.fragment)},m(e,t){$e(n,e,t),r=!0},p:e,i(e){r||(de(n.$$.fragment,e),r=!0)},o(e){pe(n.$$.fragment,e),r=!1},d(e){be(n,e)}}}function Jn(e){let t,n;return t=new kn({props:{modal:Yn}}),{c(){he(t.$$.fragment)},m(e,r){$e(t,e,r),n=!0},p(e,n){const r={};0&n&&(r.modal=Yn),t.$set(r)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function Un(e){let t,n,r,a,s,o,i,c,u,d,p,f,m,v,g,$,b,x,k,T,z,j,F=e[1]&&Gn(e),W=e[2]&&Kn(e);return d=new Sn({}),d.$on("click",e[7]),m=new jt({}),g=new Ot({}),b=new en({}),k=new ln({props:{$$slots:{default:[Jn]},$$scope:{ctx:e}}}),e[8](k),{c(){t=C("div"),n=C("nav"),r=C("li"),r.textContent="Graphs",a=_(),s=C("li"),s.textContent="Data",o=_(),F&&F.c(),i=_(),c=C("div"),W&&W.c(),u=_(),he(d.$$.fragment),p=_(),f=C("div"),he(m.$$.fragment),v=_(),he(g.$$.fragment),$=_(),he(b.$$.fragment),x=_(),he(k.$$.fragment),S(r,"class","svelte-1k20jgw"),Q(r,"active","chart"===e[3]),S(s,"class","svelte-1k20jgw"),Q(s,"active","data"===e[3]),S(n,"class","chart-data-nav svelte-1k20jgw"),S(c,"class","action-buttons svelte-1k20jgw"),S(t,"class","controls svelte-1k20jgw"),S(f,"data-testid","gbwidgets"),S(f,"class","gbwidgets svelte-1k20jgw")},m(l,w){y(l,t,w),h(t,n),h(n,r),h(n,a),h(n,s),h(t,o),F&&F.m(t,null),h(t,i),h(t,c),W&&W.m(c,null),h(c,u),$e(d,c,null),y(l,p,w),y(l,f,w),$e(m,f,null),h(f,v),$e(g,f,null),h(f,$),$e(b,f,null),y(l,x,w),$e(k,l,w),T=!0,z||(j=[M(r,"click",q(e[5])),M(s,"click",q(e[6]))],z=!0)},p(e,[n]){8&n&&Q(r,"active","chart"===e[3]),8&n&&Q(s,"active","data"===e[3]),e[1]?F?(F.p(e,n),2&n&&de(F,1)):(F=Gn(e),F.c(),de(F,1),F.m(t,i)):F&&(ce(),pe(F,1,1,(()=>{F=null})),ue()),e[2]?W?(W.p(e,n),4&n&&de(W,1)):(W=Kn(e),W.c(),de(W,1),W.m(c,u)):W&&(ce(),pe(W,1,1,(()=>{W=null})),ue());const l={};8192&n&&(l.$$scope={dirty:n,ctx:e}),k.$set(l)},i(e){T||(de(F),de(W),de(d.$$.fragment,e),de(m.$$.fragment,e),de(g.$$.fragment,e),de(b.$$.fragment,e),de(k.$$.fragment,e),T=!0)},o(e){pe(F),pe(W),pe(d.$$.fragment,e),pe(m.$$.fragment,e),pe(g.$$.fragment,e),pe(b.$$.fragment,e),pe(k.$$.fragment,e),T=!1},d(n){n&&w(t),F&&F.d(),W&&W.d(),be(d),n&&w(p),n&&w(f),be(m),be(g),be(b),n&&w(x),e[8](null),be(k,n),z=!1,l(j)}}}let Yn,Xn;function er(e,t,n){let r,l,a,s,o;i(e,_t,(e=>n(0,l=e))),i(e,xt,(e=>n(10,a=e))),i(e,kt,(e=>n(11,s=e))),i(e,gt,(e=>n(3,o=e)));let c=!1;const d=async e=>{let t;n(1,c=!0);try{t=await En(e)}catch(e){console.warn(e)}u(kt,s=(e=>{const t=e.filter(((t,n)=>!(n>0&&jn(t.started,e[n-1].started)))).map((e=>e.started)).map((t=>e.filter((e=>jn(e.started,t)))));let n=[];return t.forEach(((e,t)=>{const r=e.filter((e=>0===e.reading_incorrect)).reduce(((e,t)=>e+1),0),l=e.filter((e=>0===e.meaning_incorrect)).reduce(((e,t)=>e+1),0),a=e.filter((e=>e.meaning_incorrect+e.reading_incorrect===0)).reduce(((e,t)=>e+1),0),s=e.reduce(((e,t)=>e+t.questions),0),o=e.length,i={start:e[0].started,end:e[e.length-1].started,review_count:e.length,question_count:s,accuracy:a/o,reading_accuracy:r/o,meaning_accuracy:l/o};n.push(i)})),n})(t),s),u(xt,a=(e=>{const t=Wn(e);let n=[];return t.forEach((e=>{const t=e.reviews.reduce(((e,t)=>e+t.questions),0),r=t-e.reviews.reduce(((e,t)=>e+(t.meaning_incorrect+t.reading_incorrect)),0),l={start:e.startTime,end:e.endTime,reviewCount:e.reviews.length,questionCount:t,correctAnswerCount:r};n.push(l)})),n})(t),a),n(1,c=!1)};let p=!1;wkof.wait_state("ss_quiz","ready").then((()=>{"function"==typeof(null===ss_quiz||void 0===ss_quiz?void 0:ss_quiz.open)&&n(2,p=!0)}));return e.$$.update=()=>{1&e.$$.dirty&&d(l.daysToReview),1&e.$$.dirty&&(r=l.rQuiz&&l.kQuiz&&l.vQuiz?"rad,kan,voc":l.rQuiz&&l.kQuiz&&!l.vQuiz?"rad,kan":l.rQuiz&&!l.kQuiz&&l.vQuiz?"rad,voc":!l.rQuiz||l.kQuiz||l.vQuiz?!l.rQuiz&&l.kQuiz&&l.vQuiz?"kan,voc":l.rQuiz||!l.kQuiz||l.vQuiz?l.rQuiz||l.kQuiz||!l.vQuiz?"rad,kan,voc":"voc":"kan":"rad")},[l,c,p,o,async()=>{await wkof.wait_state("ss_quiz","ready"),ss_quiz.open({ipreset:{name:`New ${r}`,content:{wk_items:{enabled:!0,filters:{srs:{enabled:!0,value:{appr1:!0,appr2:!0}},item_type:{enabled:!0,value:r}}}}}})},()=>u(gt,o="chart",o),()=>u(gt,o="data",o),()=>Yn.show(),function(e){N[e?"unshift":"push"]((()=>{Yn=e}))}]}class tr extends xe{constructor(e){super(),we(this,e,er,Un,s,{})}}function nr(t){let n;return{c(){n=C("div"),n.innerHTML='<h2>GanbarOmeter</h2>   \n    <p>The GanbarOmeter needs the Wankani Open Framework to be installed prior to use.</p>  \n    \n    <p>Please refer to the <a href="http://community.wanikani.com/t/instructions-installing-wanikani-open-framework/28549">WKOF\n    installation instructions.</a></p>',S(n,"class","placeholder svelte-3pkdxk")},m(e,t){y(e,n,t)},i:e,o:e,d(e){e&&w(n)}}}function rr(e){let t,n;return t=new tr({}),{c(){he(t.$$.fragment)},m(e,r){$e(t,e,r),n=!0},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){pe(t.$$.fragment,e),n=!1},d(e){be(t,e)}}}function lr(e){let t,n,r,l,a;const s=[rr,nr],o=[];return n=function(e,t){return e[1]?0:1}(e),r=o[n]=s[n](e),{c(){t=C("section"),r.c(),S(t,"data-testid","ganbarometer"),S(t,"class","ganbarometer svelte-3pkdxk"),S(t,"style",l=` \n    --bgColor: ${e[0].bgColor}; \n    --trackColor: ${e[0].trackColor}; \n    --textColor: ${e[0].textColor}; \n    --hlTextColor: ${e[0].hlTextColor}; \n    --fillColor: ${e[0].fillColor}; \n    --warnColor: ${e[0].warnColor}; \n    --lTrackColor: ${e[0].lTrackColor}; \n    --hTrackColor: ${e[0].hTrackColor};`)},m(e,r){y(e,t,r),o[n].m(t,null),a=!0},p(e,[n]){(!a||1&n&&l!==(l=` \n    --bgColor: ${e[0].bgColor}; \n    --trackColor: ${e[0].trackColor}; \n    --textColor: ${e[0].textColor}; \n    --hlTextColor: ${e[0].hlTextColor}; \n    --fillColor: ${e[0].fillColor}; \n    --warnColor: ${e[0].warnColor}; \n    --lTrackColor: ${e[0].lTrackColor}; \n    --hTrackColor: ${e[0].hTrackColor};`))&&S(t,"style",l)},i(e){a||(de(r),a=!0)},o(e){pe(r),a=!1},d(e){e&&w(t),o[n].d()}}}function ar(e,t,n){let r;i(e,_t,(e=>n(0,r=e)));let l=!!wkof;return[r,l]}_t.subscribe((e=>Xn=e.position));const sr=document.querySelector(".dashboard .span12");let or={target:sr,anchor:null};switch(Xn){case"Top":or.anchor=sr.querySelector(".progress-and-forecast");break;case"Below Forecast":or.anchor=sr.querySelector(".srs-progress");break;case"Below SRS":or.anchor=sr.querySelector(".row");break;case"Below Panels":or.anchor=sr.querySelector(".row:last-of-type");break;default:or.anchor=null}const ir=new class extends xe{constructor(e){super(),we(this,e,ar,lr,s,{})}}(or);return ir}();
//# sourceMappingURL=bundle.user.js.map
